import{a as Bi}from"../../js/chunk-WSI4CI7G.mjs";function S(i,t){if(!{}.hasOwnProperty.call(i,t))throw new TypeError("attempted to use private field on non-instance");return i}var Vi=0;function Bt(i){return"__private_"+Vi+++"_"+i}var Pt="default",A=Bt("listeners"),U=Bt("context"),ft=Bt("addEventListeners"),E=class{constructor(t,e=!1){Object.defineProperty(this,ft,{value:qi}),Object.defineProperty(this,A,{writable:!0,value:new Map}),Object.defineProperty(this,U,{writable:!0,value:null}),this.strict=!1,S(this,U)[U]=t||this,this.strict=e}on(t,e){return S(this,ft)[ft](t,e,!1),this}one(t,e){return S(this,ft)[ft](t,e,!0),this}off(t,e){return(Array.isArray(t)?t:t.split(" ")).forEach(n=>{let[s,...r]=n.includes(".")?n.split("."):[n,Pt],a=r.join(".")||Pt;(s?[S(this,A)[A].get(s)]:[...S(this,A)[A].values()]).filter(Boolean).forEach(u=>{Array.from(u.entries()).forEach(([c,p])=>{(!e||e===c)&&p.namespace===a&&u.delete(c)}),u.size===0&&S(this,A)[A].delete(s)})}),this}clear(){return S(this,A)[A].clear(),this}async trigger(t,...e){let[o,...n]=t.split("."),s=n.join("."),r=S(this,A)[A].get(o),a=S(this,A)[A].get("*"),l=[];return r&&r.forEach((u,c)=>{(!s||u.namespace.startsWith(s))&&(l.push(Promise.resolve(c.call(S(this,U)[U],...e))),u.once&&r.delete(c))}),a&&a.forEach((u,c)=>{l.push(Promise.resolve(c.call(S(this,U)[U],t,...e)))}),this.strict&&l.length===0&&console.warn(`No listeners for event: ${t}`),Promise.all(l)}async emit(t,...e){return this.trigger(t,...e)}};function qi(i,t,e){(Array.isArray(i)?i:i.split(" ")).forEach(n=>{let[s,...r]=n.includes(".")?n.split("."):[n,Pt],a=r.join(".")||Pt;S(this,A)[A].has(s)||S(this,A)[A].set(s,new Map),S(this,A)[A].get(s).set(t,{once:e,namespace:a})})}var Vt=class extends E{constructor(){super(),this.init()}init(){let t=window.parent!==window;if(t){let e=()=>{this.message("LOCATION_CHANGE",{title:document.title,location:window.location.toString()})};window.addEventListener("hashchange",e),window.addEventListener("popstate",e),window.addEventListener("load",e),document.addEventListener("DOMContentLoaded",()=>{this.message("DOM_CONTENT_LOADED"),e()})}flexbe_cli.is_admin||window.addEventListener("keydown",e=>{let o="app.flexbe.com",n=e.metaKey||e.ctrlKey,s=e.shiftKey;(["F2"].includes(e.key)||["/","\\"].includes(e.key)&&n&&s)&&(t?this.message("CLOSE_FRAME"):window.location.href=`https://${o}/project/${flexbe_cli.group_id}/editor/${flexbe_cli.p_id}/`)})}message(t,e={}){window.parent!==window&&window.parent.postMessage({message:t,payload:e},"*"),this.trigger(t,e)}},v=new Vt;var yn=String.fromCharCode;function De(i,t="default"){let[e,o]=i.split("#"),[n,s]=e.split("?"),r=n.endsWith("/"),a=n;return/\.[0-9a-z]+$/i.test(n)||n.startsWith("/files/")||n.startsWith("/img/")||!n.startsWith("./")&&!n.startsWith("/")?i:(t==="enabled"&&!r&&a&&(a=`${a}/`),t==="disabled"&&r&&n!=="/"&&(a=a.replace(/\/$/,"")),`${a}${s?`?${s}`:""}${o?`#${o}`:""}`)}var ji=150,ze=2160,Re={avif:null,webp:null};function Hi(){var i;let t=typeof flexbe_cli=="object"&&((i=flexbe_cli.vars)==null?void 0:i.site.images)||{};return{lazy:!0,lazy_priority:!1,avif:!1,webp:!1,avif_support:Re.avif||t.avif_support,webp_support:Re.webp||t.webp_support,slow_network:!1,maxSize:ze,minSize:ji,quality_map:{jpg:70,webp:70,avif:55}}}async function qt(i){try{let t=new Image;return"decode"in t?(t.src=i,await t.decode(),!0):await new Promise(e=>{let o=t;o.onload=()=>e(!0),o.onerror=()=>e(!1),o.src=i})}catch{return!1}}function jt(i){if(typeof i!="string")return i;i=i.replace(/(\/img\/[\d_q]+)\/[\w-]+(\.\w{3,4})/i,"$1$2");let[,t,e,o,n]=i.match(/\/img\/(\d+)_?(\d+)?_?q?(\d+)?\.(\w{3,4})/i)||[],s=+t,r=`${t}.${n}`,a=e?+e:0,l=o?+o:null;return{id:s,ext:n,name:r,size:a,quality:l}}function Wi(i,t){let e=t.avif_support,o=t.webp_support,n=t.avif,s=t.webp,r=i.ext;return e&&n?r="avif":o&&s?r="webp":i.ext==="webp"&&(o?r="webp":r=i.transparent?"png":"jpg"),r}function Gi(i,t=null,e=null){var o;e={...Hi(),...e};let{id:n,ext:s}=i;if(!n)return"";let r=e.maxSize||ze;!t&&i.ext==="webp"&&!e.webp_support&&(t=Math.min(i.width||r,r));let a=(o=i.animated)!=null?o:s==="gif",l=`/img/${n}.${s}`;if(!t||a||s==="svg")return l;let c=Wi(i,e),p=e.slow_network&&Ki(),f=e.quality_map;switch(p&&(f={jpg:50,webp:50,avif:45}),c){case"png":return`/img/${n}_${t}.png`;case"avif":case"webp":case"jpg":return`/img/${n}_${t}_q${f[c]}.${c}`;case"gif":break;default:return l}}function Ui(i){let t=String(i).match(/\.(jpg|jpeg|png|gif|svg|bmp|webp)$/i);return t!=null&&t[1]?t[1]:""}function Yi(i){return i!=="transparent"?i:"#000000"}function Ht(i){if(typeof i=="string"&&(i=jt(i)),!i||typeof i!="object")return{};let t=i.img_ext||i.ext,e=i.img_id||i.id,o=i.img_name||i.name;(!t||t==="false")&&(t=o?Ui(o):"jpg");let n=i.img_border||i.border,s=Yi(i.img_average||i.average),r=i.img_preview||i.preview||"",a=i.img_width||i.width||0,l=i.img_height||i.height||0,c=+(+i.img_proportion||+i.proportion||0).toFixed(2),p=i.img_animated||i.animated||t==="gif",f=i.img_transparent||i.transparent||0;return{id:e,ext:t,average:s,preview:r,width:a,height:l,proportion:c,border:n,animated:p,transparent:f}}function Ne(i,t=0,e){let o=Ht(i),n=typeof t=="number"?Math.round(t):typeof t=="string"?parseInt(t,10):null;return Gi(o,n,e)}function Ki(){var i;return typeof navigator>"u"?!1:(((i=navigator.connection)==null?void 0:i.effectiveType)||"4g")!=="4g"}function pt(i,t){if(!{}.hasOwnProperty.call(i,t))throw new TypeError("attempted to use private field on non-instance");return i}var Zi=0;function Jt(i){return"__private_"+Zi+++"_"+i}var Wt=Jt("checkSupports"),ht=Jt("deviceInfo"),mt=Jt("applyClasses"),Gt=class{constructor(){Object.defineProperty(this,mt,{value:io}),Object.defineProperty(this,ht,{value:eo}),Object.defineProperty(this,Wt,{value:to}),this.is_screen_mobile=void 0,this.is_screen_mobile_scaled=void 0,this.is_screen_desktop=void 0,this.is_screen_desktop_scaled=void 0,this.is_touch=void 0,this.is_pointer=void 0,this.is_tablet=void 0,this.is_mobile=void 0,this.is_desktop=void 0,this.is_chrome=void 0,this.is_safari=void 0,this.is_firefox=void 0,this.is_OSX=void 0,this.is_android=void 0,this.is_ios=void 0,this.is_preview=void 0,this.is_bot=void 0,this.is_instagram=void 0,this.device_type=void 0}init(){pt(this,ht)[ht](),pt(this,mt)[mt](),pt(this,Wt)[Wt](),$(window).on("resize.deviceInfo",()=>{pt(this,ht)[ht]()}),$(window).on("resized.deviceInfo",()=>{pt(this,mt)[mt]()}),flexbe_cli.events.on("hideShowUI",t=>{this.is_preview=["preview","generation"].includes(t),$(document.body).removeClass("mode--editor mode--preview mode--generation").addClass(`mode--${t}`)})}matchScreen(t,e){let o=["screen"];return t!=null&&o.push(`(min-width: ${t}px)`),e!=null&&o.push(`(max-width: ${e}px)`),window.matchMedia(o.join(" and ")).matches}};async function to(){let i=flexbe_cli.vars.site.images||{},[t,e]=await Promise.all([i.webp_support||qt("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"),i.avif_support||qt("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")]);i.webp_support=t,i.avif_support=e}function eo(){var i,t;let e=(i=window.CSS)==null?void 0:i.supports("zoom","1"),o=navigator.userAgent.toLowerCase();this.is_screen_mobile=this.matchScreen(0,767),this.is_screen_mobile_scaled=e&&this.matchScreen(0,399),this.is_screen_desktop=this.matchScreen(768,1e4),this.is_screen_desktop_scaled=e&&this.matchScreen(768,1199),this.is_touch="ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(any-pointer: coarse)").matches,this.is_pointer=!this.is_touch||window.matchMedia("(pointer: fine)").matches,this.is_tablet=/ipad|xoom|kindle|playbook|tablet/i.test(o),this.is_mobile=!this.is_tablet&&o.indexOf("mobile")!==-1,this.is_desktop=!this.is_mobile&&!this.is_tablet,this.is_chrome=/(chromium|chrome)\/(\d+)/.test(o),this.is_safari=o.indexOf("safari")!==-1&&((t=o.match(/version\/(\d+)/))==null?void 0:t[1]),this.is_firefox=o.indexOf("firefox")!==-1,this.is_OSX=/ipad|iphone|ipod|macintosh/gi.test(o),this.is_android=o.indexOf("android")!==-1,this.is_ios=this.is_OSX&&this.is_touch&&!this.is_desktop,this.is_preview=/is-view|mode--preview|mode--generation/.test(document.body.className),this.is_instagram=/instagram/i.test(o),this.is_mobile&&this.is_touch?this.device_type="mobile":this.is_tablet&&this.is_touch?this.device_type="tablet":this.device_type="desktop"}function io(){let i=$(document.body);i.toggleClass("is-mobile",this.is_mobile),i.toggleClass("is-tablet",this.is_tablet),i.toggleClass("is-desktop",this.is_desktop),i.toggleClass("is-pointer",this.is_pointer),i.toggleClass("is-touch",this.is_touch),i.toggleClass("is-ios",!!this.is_ios),i.toggleClass("is-android",this.is_android),i.toggleClass("is-osx",this.is_OSX&&this.is_desktop),i.toggleClass("is-safari",!!this.is_safari),this.is_safari&&i.addClass(`is-safari-${this.is_safari}`),i.toggleClass("is-firefox",this.is_firefox),i.toggleClass("is-chrome",this.is_chrome),i.toggleClass("is-instagram",this.is_instagram)}var Y=new Gt;function O(i,t){if(!{}.hasOwnProperty.call(i,t))throw new TypeError("attempted to use private field on non-instance");return i}var ro=0;function Ve(i){return"__private_"+ro+++"_"+i}var Be,T=Ve("smallViewportHeight"),C=Ve("largeViewportHeight"),Zt=class{constructor(){this.containerWidth=null,this.oldWidth=null,this.oldHeight=null,this.lockedMode=!1,this.responsiveMode=null,this.clientWidth=null,this.clientHeight=null,Object.defineProperty(this,T,{writable:!0,value:null}),Object.defineProperty(this,C,{writable:!0,value:null}),this.lockedViewport=!1,this.viewportWidth=null,this.viewportHeight=null,this.proportion=null}init(){this.simulateWindowResized(),this.simulateDocumentResize(),this.updateSizes({triggerResize:!1}),this.watchContainerSize(),this.applySizeVariablesOnResize()}trigger(t,e=window){e.dispatchEvent(new CustomEvent(t))}getAccurateViewportInfo(){let e=document.documentElement.getBoundingClientRect(),o=window.innerWidth,n=window.innerHeight,s=Math.round(e.width),r=n,a=o-s;return{clientWidth:s,clientHeight:r,viewportWidth:o,viewportHeight:n,scrollbarWidth:a}}updateSizes({width:t,height:e,proportion:o=null,triggerResize:n=!0,lockViewport:s}){var r,a;let{clientWidth:l,clientHeight:u,scrollbarWidth:c}=this.getAccurateViewportInfo();t=t??(this.lockedViewport?this.viewportWidth:l),e=e??(this.lockedViewport?this.viewportHeight:u),t=Math.min(t,l),e=Math.min(e,u);let p=t>=0&&t<=399,f=t>=768&&t<=1199;(f||p)&&(t=f?1200:400),this.oldWidth=this.clientWidth,this.oldHeight=this.clientHeight,this.viewportWidth=t,this.viewportHeight=e,this.clientWidth=l,this.clientHeight=u,O(this,T)[T]=Math.min(this.clientHeight,(r=O(this,T)[T])!=null?r:this.clientHeight),O(this,C)[C]=Math.max(this.clientHeight,(a=O(this,C)[C])!=null?a:this.clientHeight),(flexbe_cli.is_admin||O(this,C)[C]-O(this,T)[T]>120)&&(O(this,T)[T]=this.clientHeight,O(this,C)[C]=this.clientHeight),this.scrollbarWidth||(this.scrollbarWidth=c),o!=null&&(this.proportion=o),s!=null&&(this.lockedViewport=s),this.lockedMode||(this.responsiveMode=flexbe_cli.vars.page.responsive&&t<=767?"mobile":"desktop"),n&&(this.trigger("resize"),this.trigger("resized"))}lockMode(t){this.lockedMode=t}applySizeVariablesOnResize(){let t=$(document.documentElement),e=$(document.body),o=()=>{t.css("--scrollbarWidth",`${this.scrollbarWidth}px`),t.css("--100vw",`${this.viewportWidth}px`),t.css("--100vh",`${this.viewportHeight}px`),CSS.supports("height","1svh")||t.css("--100svh",`${O(this,T)[T]}px`),CSS.supports("height","1lvh")||t.css("--100lvh",`${O(this,C)[C]}px`),this.proportion?t.css("--cover",`${Math.round(this.viewportWidth/this.proportion)}px`):t.css("--cover",""),e.toggleClass("adaptive-mobile",this.responsiveMode==="mobile"),e.toggleClass("adaptive-desktop",this.responsiveMode==="desktop")};o(),Y.is_ios&&setTimeout(()=>o(),150),$(window).on("resized.setVars",()=>o())}watchContainerSize(){let t=()=>{let e=document.createElement("div");e.classList.add("container"),requestAnimationFrame(()=>{document.body.appendChild(e),this.containerWidth=e.offsetWidth,document.body.removeChild(e)})};t(),$(window).on("resized.setContainer",()=>t())}simulateWindowResized(){let e,o=this.oldWidth,n=this.oldHeight;$(window).on("resize orientationchange",s=>{s.originalEvent&&(this.updateSizes({triggerResize:!1}),clearTimeout(e),e=setTimeout(()=>{this.oldWidth=o,this.oldHeight=n,o=this.clientWidth,n=this.clientHeight,requestAnimationFrame(()=>{this.trigger("resized")})},80))})}simulateDocumentResize(){requestAnimationFrame(()=>{this.documentHeight=document.body.offsetHeight});let t=flexbe_cli.is_admin?200:80,e=(o=0)=>{let n=document.body.offsetHeight;Math.abs(n-this.documentHeight)>=5&&(this.documentHeight=n,this.trigger("documentresize",document),clearTimeout(Be),Be=setTimeout(()=>{this.trigger("documentresized",document)},o))};if(typeof ResizeObserver=="function"){let o=!0;new ResizeObserver(()=>{if(o){o=!1;return}e(t)}).observe(document.querySelector("body"))}else setInterval(()=>{e(0)},t)}},P=new Zt;var Ot={};function ao(i,t){let e=document.createElement("link");return new Promise((o,n)=>{let s=!1,r,a=(l=!0)=>{s||(s=!0,clearTimeout(r),l==="timeout"?n(new Error("timeout")):o(l))};e.onerror=a.bind(null,!1),e.onload=a.bind(null,!0),r=setTimeout(a.bind(null,"timeout"),t),e.rel="stylesheet",e.href=i,document.body.appendChild(e)})}function lo(i,t){let e=document.createElement("script");return new Promise((o,n)=>{let s=!1,r,a=(l=!0)=>{s||(s=!0,clearTimeout(r),l==="timeout"?n(new Error("timeout")):o(l))};e.onload=a.bind(null,!0),e.onerror=a.bind(null,!1),r=setTimeout(a.bind(null,"timeout"),t),e.async=!0,e.src=i,document.body.appendChild(e)})}function qe(i,t=15e3){return!i||i.length===0?Promise.resolve(!1):Array.isArray(i)?Promise.all(i.map(e=>qe(e,t))).then(e=>e.every(Boolean)):(Ot[i]||(Ot[i]=/\.css(\?.*)?$/.test(i)?ao(i,t):lo(i,t)),Ot[i])}function R(i,t,e=15e3){let o=qe(i,e);return typeof t=="function"&&o.then(()=>t(!0)).catch(()=>t(!1)),o}var et={anchorToCenter:!0,inScroll:!1,skip:!1,_latest:null,get latest(){let i=P.zoom||1;return this._latest/i},init(){window.history.scrollRestoration&&(window.history.scrollRestoration="auto"),requestAnimationFrame(()=>{this._latest=window.scrollY}),document.addEventListener("wheel",()=>{this.$inScrollElement&&(this.$inScrollElement.stop(),this.$inScrollElement=null)},{passive:!0}),document.addEventListener("scroll",()=>{this.inScroll=!0,this._latest=window.scrollY},{passive:!0}),document.addEventListener("scrollend",()=>{this.inScroll=!1},{passive:!0}),this.scrollImprovement.init(),flexbe_cli.vars.site.smoothingScroll&&this.scrollSmoothing.init()},scrollImprovement:{scrollTimer:0,init(){this.createStopScrollEvent()},createStopScrollEvent(){let i=et.latest;document.addEventListener("scroll",()=>{let t=i>et.latest?"up":"down",e=Math.max(et.latest-i,i-et.latest);clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{i=et.latest,document.dispatchEvent(new CustomEvent("scrollend",{detail:{direction:t,distance:e}}))},200)},{passive:!0})}},scrollSmoothing:{duration:1.2,lenisInstance:null,instances:[],loadLib(){return new Promise(i=>R(["/_s/lib/lenis/lenis.min.js"],()=>i(!0)))},async init(){if(flexbe_cli.is_admin)return;let i=".scroller",t=".widget-content, .elements-list",e=".container-list",o=document.querySelectorAll(i);await this.loadLib(),this.instances.push(new window.Lenis({duration:this.duration,eventsTarget:document.querySelector(e)||document.documentElement})),o.length&&o.forEach(s=>{let r=new window.Lenis({duration:this.duration,wrapper:s,eventsTarget:s.querySelector(t)||s});this.instances.push(r)});let n=s=>{this.instances.forEach(r=>{r.raf(s)}),requestAnimationFrame(n)};requestAnimationFrame(n),$(document).on("bringIntoView.scroll-smoothing",()=>{this.instances.forEach(s=>{s.stop(),s.start()})})},destroy(){$(document).off(".scroll-smoothing"),this.instances.forEach(i=>{i.destroy()}),this.instances=[]}},scrollLock:{loaded:!1,locked:!1,async load(){if(!this.loaded)return R(["/_s/lib/scroll-lock/scroll-lock.min.js"],()=>{this.loaded=!0,window.scrollLock._state.lockableSelectors=["html"],window.scrollLock._state.fillGapSelectors=["html"],window.scrollLock._state.scrollableSelectors=[".scroller",".scrollable","[data-scroll-lock-scrollable]"]})},async lock(){this.locked=!0,await this.load(),typeof window.scrollLock<"u"&&(window.scrollLock.disablePageScroll(),P.trigger("resized"))},unlock(){this.locked=!1,typeof window.scrollLock<"u"&&(window.scrollLock.clearQueueScrollLocks(),window.scrollLock.enablePageScroll(),P.trigger("resized"))}},to(i){document.scrollingElement.scrollTo(0,i)},toElement(i,t={}){let e=$(i);if(i=e[0],!i)return!1;t.animation==null&&(t.animation=!0),t.centered==null&&(t.centered=this.anchorToCenter),t.force==null&&(t.force=!0);let o=0,n=0,s,r=flexbe_cli.helpers.scrollParent(i,"y");(!r||$(r).is(".b_block, .container-list"))&&(r=document.scrollingElement);let a=t.padding||0,l=r===document.body||r===document.documentElement,u=l?flexbe_cli.resize.clientHeight:r.offsetHeight,c,p;if(e.closest(".markdown-markup").length){let h=e.closest(".markdown-markup");if(c=e.offset().top,p=i.offsetHeight,i.hasAttribute("data-id")){let b=i.getAttribute("data-id"),_=h.find(`[data-id="${b}"]`).not(i)[0];_&&(c=$(_).offset().top,p=_.offsetHeight)}t.centered=!1}else c=e.offset().top,p=i.offsetHeight;let f=l?$("html, body"):$(r);Y.is_mobile?s=f.find(".menu-fixed > .nav-header"):flexbe_cli.theme_id===4?n=flexbe_cli.fixed.getAllFixedHeight(c):s=f.find('.floating[data-floating="true"]'),s&&s.length&&(n+=s[0].offsetHeight-2);let m=Math.max(0,u-n-p);if(p>=u&&(t.centered=!1),t.centered?o=c-Math.max(0,m/2)-n:(o=c-a-n,e.closest(".markdown-markup").length&&(o-=20)),t.offset&&(o+=t.offset),!t.force){let h=r.offsetTop,g=e[0].getBoundingClientRect(),b=Math.max(g.top,h);if(Math.min(g.bottom,h+u)-b>=p/2)return typeof t.complete=="function"&&t.complete(),!1}this.$inScrollElement=f,$(document).off("documentresize.scrollTo").on("documentresize.scrollTo",()=>{this.toElement(i,t)});let d=!1;f.stop(),f.animate({scrollTop:o},{delay:t.delay||0,duration:t.duration?t.duration:t.animation?450:0,easing:t.animation?"swing":"linear",always:(...h)=>{d||(d=!0,this.$inScrollElement=!1,$(document).off("documentresize.scrollTo"),typeof t.complete=="function"&&t.complete(...h))}})}},z=et;function te(i){let t=$(i).eq(0);if(t.length){let e=new Event("bringIntoView",{bubbles:!0,cancelable:!0});t[0].dispatchEvent(e)}}function je(i,t=!1){if(i=i?De(i,flexbe_cli.vars.site.trailingSlash):null,flexbe_cli.is_admin){i?v.message("LEAVE_PAGE",{href:i,blank:t}):v.message("WRONG_LINK",{type:"link",href:i});return}if(!i){console.warn("Empty link");return}window.parent!==window&&i.includes("http")&&(t=!0),t?window.open(i,"_blank").focus():window.location.href=i}function Mt(i="",t){if(typeof i!="string")return!1;if(/#{1,2}.+/.test(i)){flexbe_cli.theme_id===4&&$('nav[data-opened="true"]').length&&v.trigger("ui_mobilemenu_close",{}),flexbe_cli.theme_id!==4&&$(".mobile-menu.show").length&&$(".mobile-menu").removeClass("show").trigger("close"),i=i.replace(/^\.\/#{2}/,"#").trim();let e=i.trim().split("#"),o=e[e.length-1];if(!(e[0]===""||e[0]==="./"||e[0]===new URL(document.baseURI).pathname))return je(i),!0;let s=$(`._anchor[name="${o}" i], [id="${o}"]`),r=s.length?s.closest("[data-id]"):$(`[data-id="${o}" i]`);r.is(".element-item--free")&&(r=r.find(".element-content"));let a=r.closest(".b_block").filter(":visible"),l=r.closest(".m_modal");if((s.length||r.length)&&te(s.length?s:r),o==="cart")v.trigger("ui_modal_close",{}),v.trigger("ui_cart_open",{});else if(a.length)v.trigger("ui_cart_close",{}),v.trigger("ui_modal_close",{}),setTimeout(()=>{let u=a;if(r&&!a.is(r)){let c=a[0].getBoundingClientRect(),p=r[0].getBoundingClientRect(),f=p.top-c.top>P.viewportHeight-100,m=p.top<c.top||p.bottom>c.bottom;(f||m)&&(u=r)}u.is(":visible")&&z.toElement(u,{force:!o.startsWith("tab")})},30),window.history.replaceState(null,null,`#${o}`);else if(l.length){let u=l.data("id");v.trigger("ui_cart_close",{}),v.trigger("ui_modal_open",{id:u})}else window.location.hash=`#${o}`,flexbe_cli.is_admin&&v.message("WRONG_LINK",{type:"anchor",href:`#${o}`})}else return je(i,t),!0}function He(i=document){$(i).find("[data-product]").each((e,o)=>{let n=$(o),s=n.data("product");n.removeAttr("data-product"),(s==null||typeof s=="object"&&!Object.keys(s).length)&&(s=null),s!==null?n.data("product",s):n.removeData("product")})}function ee(){if(flexbe_cli.lockPopstate)return;let i=window.location.hash;if(!i&&window.parent)try{i=window.parent.location.hash}catch{}flexbe_cli.lockPopstate=!0,/^#/.test(i)?Mt(i):flexbe_cli.modal.opened.size&&v.trigger("ui_modal_close"),flexbe_cli.lockPopstate=!1}function ie(i=()=>{},t=()=>{}){let e=!1;["complete","loaded"].includes(document.readyState)?o():document.addEventListener("DOMContentLoaded",()=>o());function o(){if(!e){if(typeof $>"u"||!$.debounce){setTimeout(o,10);return}e=!0,i(),requestAnimationFrame(async()=>{$("body").removeClass("noanimate").addClass("DOMContentLoaded"),await t(),flexbe_cli.vars.globals.isService||(ee(),setTimeout(()=>ee(),1e3),window.addEventListener("popstate",ee)),flexbe_cli.isInited=!0})}}}var oe={};Bi(oe,{get:()=>co,set:()=>uo});function co(i){let t=document.cookie.match(new RegExp(`(?:^|; )${i.replace(/([$()*+./?[\\\]^{|}])/g,"\\$1")}=([^;]*)`));return t?decodeURIComponent(t[1]):void 0}function uo(i,t,e={}){let o=e.expires;if(typeof o=="number"){let r=new Date;r.setTime(r.getTime()+o*1e3),o=r,e.expires=r}else o instanceof Date&&(e.expires=o.toUTCString());t=encodeURIComponent(t);let n=`${i}=${t}`;Object.keys(e).forEach(r=>{n+=`; ${r}`;let a=e[r];a!==!0&&(n+=`=${a}`)}),document.cookie=n}function Lt(i){if(!i||!i.offsetParent)return null;let t=0,e=0;for(;i;){if($.css(i,"position")==="fixed"){t+=window.scrollY,e+=window.scrollX;break}t+=i.offsetTop-i.scrollTop,e+=i.offsetLeft-i.scrollLeft,i=i.offsetParent}return{top:Math.round(t),left:Math.round(e)}}function We(i,t=[]){return i.parentNode==null?t:We(i.parentNode,[...t,i])}function fo(i){let t=/(auto|scroll)/,e=getComputedStyle(i,null);return["overflow","overflow-y","overflow-x"].some(o=>t.test(e.getPropertyValue(o)))}function Ge(i){if(!i||!i.parentNode)return;let t=i.ownerDocument||document,e=We(i.parentNode,[]);for(let o=0;o<e.length;o++)if(fo(e[o]))return e[o];return t.scrollingElement||t.documentElement}function H(i="",t={}){return new Promise((e,o)=>{$.ajax({url:i,type:t.type||t.method||"POST",dataType:"json",...t}).done(n=>{e(n)}).fail(n=>{let s=n.responseJSON,r=s?new Error(s.message):n;r.status=n.status,r.data=s,o(r)})})}function ne(i,t={}){t={onSuccess:()=>{},onComplete:()=>{},onError:()=>{},onProgress:()=>{},...t};let e=new FormData;e.append("file",i);let o=$.ajax({url:"/mod/file/lead/upload/",type:t.type||t.method||"POST",dataType:"json",processData:!1,contentType:!1,data:e,success:(n,s)=>{t.onSuccess(n,s)},error:(n,s)=>{t.onError(n,s)},complete:(n,s)=>{t.onComplete(n,s)},xhr:()=>{let n=new window.XMLHttpRequest;return n.upload.addEventListener("progress",s=>t.onProgress(o,s)),n},...t});return o}function Ue(i){return String(i).split("").reduce((e,o)=>(e=(e<<5)-e+o.charCodeAt(0),e&e),0).toString(16)}var Ye={fetch:H,upload:ne,scrollParent:Ge,getElOffset:Lt,gotoLink:Mt,bringIntoView:te,getImageUrl:Ne,hashCode:Ue,cookie:oe};var po=[".layout-type-header",".layout-type-tabs",".layout-type-column",".layout-type-products",".flexbe-cards-container.mode-slider",".content-zone--vertical.bg-element",".content-zone--vertical:not(.bg-element) .element-item--static",".flexbe-card:not(.swiper-slide)",".quiz-progress",".step-title",".quiz-fields"].join(","),ho=[".free-area .element-item"].join(","),Ft={startTransitions(i){let t=$(i);if(flexbe_cli.is_admin){t.addClass("was-view"),t.removeClass("wait-animation");return}let e=t.find(ho),o=t.find(po);o=o.filter((a,l)=>$(l).find(o).length===0);let n=200,s=Math.min(80,1e3/o.length),r=1e3+o.length*s;o.css("--transitionDelay",a=>`${a*s}ms`),o.addClass("transition-target"),e.addClass("transition-target"),setTimeout(()=>{t.addClass("was-view")},n),setTimeout(()=>{this.stopTransition(t,o)},n+r)},stopTransition(i,t){let e=$(i),o=$(t);o.length||(o=e.find(t),o=o.filter((n,s)=>$(s).find(o).length===0)),e.removeClass("wait-animation"),o.removeClass("transition-target"),o.css("--transitionDelay",""),e.trigger("flexbe-transition-end")}};function N(i,t){if(!{}.hasOwnProperty.call(i,t))throw new TypeError("attempted to use private field on non-instance");return i}var mo=0;function gt(i){return"__private_"+mo+++"_"+i}var X=gt("lskey"),K=gt("query"),se=gt("session"),re=gt("saveSession"),ae=gt("saveReferrer"),le=class{constructor(){Object.defineProperty(this,ae,{value:vo}),Object.defineProperty(this,re,{value:_o}),Object.defineProperty(this,se,{get:bo,set:void 0}),Object.defineProperty(this,K,{get:go,set:void 0}),Object.defineProperty(this,X,{writable:!0,value:"client_utm"}),Object.keys(N(this,K)[K]).length&&N(this,re)[re](),this.referrer||N(this,ae)[ae]()}get referrer(){try{return sessionStorage.getItem("referrer")}catch(t){return console.error(t),null}}get data(){return{...N(this,se)[se],...N(this,K)[K]}}getUtm(){return this.data}toString(){return new URLSearchParams(this.data).toString()}};function go(){let i=[...new URL(window.location.toString()).searchParams].filter(([t])=>/utm_/.test(t));return{...Object.fromEntries(i)}}function bo(){try{return JSON.parse(localStorage.getItem(N(this,X)[X])||"null")}catch(i){return console.error(i),null}}function _o(){if(!flexbe_cli.is_admin)try{let i=N(this,K)[K];Object.keys(i).length?localStorage.setItem(N(this,X)[X],JSON.stringify(i)):localStorage.removeItem(N(this,X)[X])}catch{}}function vo(){try{sessionStorage.setItem("referrer",document.referrer)}catch(i){console.error(i)}}var it=new le;var yo={quiz:"quiz_start",modal:"modal_open",modal_form:"form_open",modal_done:"done_open",modal_product:"product_show",order_done:"order_done",pay_done:"pay_done",cart:"add_to_cart",link:"link_open",file:"file_load",close:"modal_close",app_link:"app_link_open"},W={get u_id(){return localStorage.getItem("f_uid")||0},set u_id(i){try{localStorage.setItem("f_uid",String(i))}catch{}},init(){if(flexbe_cli.is_admin||flexbe_cli.vars.globals.isService||flexbe_cli.vars.globals.isBot||!flexbe_cli.p_id)return;let i=flexbe_cli.vars.site.delayCounters||0;setTimeout(()=>{let t=flexbe_cli.helpers.cookie.get("f_uid")||this.u_id;t?(this.u_id=t,xo()):wo()},i),this.AB.init(),this.ecommerce.init(),this.QUIZ.init()},getGoal(i,t){if(i==="modal"){let{modal:e}=flexbe_cli.modal.find(t)||{modal:null};/form/.test(t)?i="modal_form":/done/.test(t)?i="modal_done":/product/.test(t)?i="modal_product":(/quiz/.test(t)||e&&e.getAttribute("data-m-id")==="QUIZ")&&(i="quiz")}return yo[i]||!1},reachGoal(i,t={}){if(flexbe_cli.is_admin||!i)return;let e={goalAction:"send",goalValue:""};t.goalParams&&(e.goalParams=t.goalParams),t.leadId&&(e.leadId=t.leadId),v.trigger("reach_goal",{name:i,params:e})},reachGoals(i={},t={}){if(flexbe_cli.is_admin||flexbe_cli.vars.globals.isService||flexbe_cli.vars.globals.isBot||!flexbe_cli.p_id)return;let e=`${i.goal||""}`.trim(),o=`${i.mainGoal||""}`.trim(),n=`${i.htmlGoal||""}`.trim();if(o&&this.reachGoal(o,t),e)try{this.reachGoal(e,t)}catch(s){console.warn("reachGoals [goal]: ",s.message)}if(n)try{let s=n.replace(/{{\s*goalAction\s*}}/g,t.goalAction||"").replace(/{{\s*goalValue\s*}}/g,t.goalValue||"").replace(/(["']?){{\s*goalParams\s*}}\1/g,JSON.stringify(t.goalParams||{})),r=$("<div></div>").append(s).find("script");r.length&&(s=r.html()),(async l=>{let u=Object.getPrototypeOf(async()=>{}).constructor;await new u("{ goalAction, goalValue, goalParams, formData }",`{
 ${s} 
}`)(l)})(t).catch(l=>{console.error("Error executing action code:",l)})}catch(s){console.warn("reachGoals [htmlGoal]: ",s.message)}},ecommerce:{inited:!1,init(){this.inited=!0,window.dataLayer||(window.dataLayer=[])},add(i){this.inited||this.init(),window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.vars.site.currencyData.code,add:{products:[this._normalizeItem(i)]}}})},remove(i){this.inited||this.init(),window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.vars.site.currencyData.code,remove:{products:[this._normalizeItem(i)]}}})},purchase(i,t){if(!(!i&&i.length===0)){this.inited||this.init(),t||(t=Math.ceil(Math.random()*1e4));try{window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.vars.site.currencyData.code,purchase:{actionField:{id:t},products:i.map(e=>this._normalizeItem(e))}}})}catch{}}},_normalizeItem(i){var t,e,o;return{id:i.id,name:i.name||i.title,price:(t=i.price)!=null?t:i.orderPrice,brand:(e=i.brand)!=null?e:i.vendorCode,variant:i.optionsInfo?i.optionsInfo.map(n=>n.name).join(", "):"",quantity:(o=i.count)!=null?o:i.quantity}}},AB:{process:{},init(){flexbe_cli.is_admin||!document.querySelectorAll("[data-abtest-variant]").length||flexbe_cli.block.$blocks.on("screen",i=>{let t=i.currentTarget._core,e=i.detail||{};!e.state||!e.first||!(t!=null&&t.abtestVariant)||this.fixView(t.abtestId,t.abtestVariant)})},setCookie(i){flexbe_cli.helpers.cookie.set("f_ab",JSON.stringify(i),{expires:7*24*60*60,path:"/",domain:document.location.hostname})},getCookie(){let i=flexbe_cli.helpers.cookie.get("f_ab");if(i)try{i=JSON.parse(decodeURIComponent(i))}catch(t){console.warn("Can`t parse abtest cookie",t)}return i||(i={view:{},lead:[]}),i},async fixView(i,t){if(i==null||t==null||t!=="a"&&t!=="b")return;if(this.getCookie().view[i]==null&&!this.process[i]){this.process[i]=!0;try{await H("/mod/stat/abtest/",{data:{testId:i,variant:t,s_id:flexbe_cli.s_id,p_id:flexbe_cli.p_id}});let o=this.getCookie();o.view[i]=t,this.setCookie(o)}catch(o){console.error("Can't fix abtest",o)}this.process[i]=!1}}},QUIZ:{inited:!1,init(){this.inited||(this.inited=!0,v.on("quiz_event.stat",(i={})=>{let t=i.payload||{};if(!["step","submit"].includes(i.event)||i.event==="step"&&!t.toNext)return;let e=i.quiz,o=e.$area.attr("data-page-id"),n=i.answerGoals,s=i.resultGoals,r=i.resultGoalsData,l=e.core.id,u=t.fromAnswers||[],c=t.toId,p=t.sessionId,f=t.fromId,m=u.reduce((d,h)=>d.concat((h.variants||[]).map(g=>g.id)),[]);if(this.fixAnswer({sessionId:p,sectionId:l,answerStep:f,answerVariants:m,viewStep:c,pId:o}),n){let d="answer";u.forEach(h=>{var g;if((g=h.variants)!=null&&g.length)h.variants.forEach(b=>{let _=b.value;W.reachGoals(n,{goalAction:d,goalValue:_})});else{let b=h.value||"";["email","phone","name"].includes(h.type)&&(b=""),W.reachGoals(n,{goalAction:d,goalValue:b})}})}s&&W.reachGoals(s,r)}))},fixAnswer({sectionId:i,sessionId:t,answerStep:e,viewStep:o,answerVariants:n,pId:s}){let r;if(o&&e?r="/mod/quiz/stat/save/composite/":e?r="/mod/quiz/stat/save/answer/":o&&(r="/mod/quiz/stat/save/view/"),!r)return;W.u_id?a():v.one("user_created",()=>{a()});async function a(){return H(r,{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,f_uid:W.u_id,page_id:s||flexbe_cli.p_id,session_id:t,section_id:i,answer_step:e,answer_variants:n,view_step:o}})}}}};async function wo(){try{let i={...it.data};it.referrer&&(i.referrer=it.referrer);let t=await H("/mod/stat/",{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,utm_data:i,device:{type:flexbe_cli.run.device_type,width:flexbe_cli.resize.clientWidth,height:flexbe_cli.resize.clientHeight,dpi:window.devicePixelRatio,browser:navigator.userAgent}}});W.u_id=t.u_id,flexbe_cli.helpers.cookie.set("f_uid",t.u_id,{Path:"/"}),v.trigger("user_created")}catch(i){console.warn("Cookie visit not created",i)}}async function xo(){try{let i=await H("/mod/stat/visit/",{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,u_id:W.u_id}});i.v_id||console.warn("Visit was not registered",i)}catch(i){console.error("Visit was not registered",i)}}var ce=W;var Dt="||||",Ke=()=>0,Ao=i=>{if(i<3)return i;let t=i%100;return t>=3&&t<=10?3:t>=11?4:5},$o=i=>{let t=i%10,e=i%100;return t===1&&e!==11?0:t>=2&&t<=4&&!(e>=12&&e<=14)?1:2},Eo=i=>{let t=i%10,e=i%100;return t===0||e>=11&&e<=19?0:t===1&&e!==11?1:2},So=i=>i>=0&&i<=1?0:1,ko=i=>i>=2?1:0,Io=i=>i!==1?1:0,To=i=>i%10===1&&i%100!==11?0:i%10>=2&&i%10<=9&&(i%100<11||i%100>19)?1:2,Co=i=>i===1?0:i>=2&&i<=4?1:2,Po=i=>{if(i===1)return 0;let t=i%10;return t>=2&&t<=4&&(i%100<10||i%100>=20)?1:2},Oo=i=>i%10!==1||i%100===11?1:0,Mo=i=>{let t=i%100;return t===1?0:t===2?1:t===3||t===4?2:3},Lo=i=>{if(i===1)return 0;let t=i%100;return i===0||t>=2&&t<=19?1:2},Fo=new Map([[["ar"],Ao],[["ru","uk","bs","bs","sr","hr","be"],$o],[["fa","da","de","en","es","fi","el","he","hi","hu","hu","it","nl","no","pt","sv","tr","ka","kk","uz","af","ky","sq","az","et","sw","mn","tg","so"],Io],[["fr","tl","hy","pt-br"],ko],[["lt"],To],[["lv"],Eo],[["cs","sk"],Co],[["pl"],Po],[["is","mk"],Oo],[["sl"],Mo],[["ro"],Lo],[["hi","zu","bn"],So],[["id","ja","ko","lo","ms","th","zh","vi"],Ke]]),Do=[...Fo].reduce((i,[t,e])=>(t.forEach(o=>{i[o]=e}),i),{});function Xe(i,t){return(Do[i]||Ke)(t)}var bt=class{constructor(t){this.locale=void 0,this.phrases={},this.keyDelimiter="::",this.interpolateRegexp=/%([^%]*)%/g,this.warn=void 0,this.locale=t.locale||"en",this.warn=t.warn||console.warn.bind(console),this.extend(t.phrases||{})}extend(t,e){Object.entries(t).forEach(([o,n])=>{if(typeof e=="string"&&(o=`${e}${this.keyDelimiter}${o}`),typeof n=="object")this.extend(n,o);else if(n.startsWith("{")&&n.endsWith("}"))try{let s=JSON.parse(n);this.phrases[o]=["zero","one","two","few","many","other"].map(r=>s[r]).filter(r=>typeof r=="string").join(Dt)}catch{this.phrases[o]=n}else this.phrases[o]=n})}tr(t,e={}){if(t==null)return"";typeof e=="number"?e={count:e}:e.count??(e.count=1);let o="";return this.phrases[t]?o=String(this.phrases[t]):(o=String(t??""),this.warn(`Missing translation for key: ${t}`)),o.includes(Dt)&&(o=this.pluralize(o,e.count)),o.includes("%")?this.interpolate(o,e):o}pluralize(t,e){let o=Xe(this.locale,e),n=t.split(Dt);return n.at(o)||n.at(-1)}interpolate(t,e={}){return String(t).replace(this.interpolateRegexp,(o,n)=>{var s;return(s=e[n])!=null?s:o})}};var Qe=(i,t=2,e=",",o=".")=>{let n,s;Number.isNaN(t=Math.abs(t))&&(t=2),n=`${parseInt(i=(+i||0).toFixed(t),10)}`,(s=n.length)>3?s%=3:s=0;let r=s?n.substr(0,s)+o:"",a=n.substr(s).replace(/(\d{3})(?=\d)/g,`$1${o}`),l=t?e+Math.abs(Number(i)-Number(n)).toFixed(t).replace(/-/,"0").slice(2):"";return r+a+l},Je={dateFormat:{dateLiteral:"/",dateMask:"DD/MM/YYYY",firstDay:1,dateTimeLiteral:", ",hour12:!1,timeLiteral:":",timeMask:"HH:MM"},translation:{},_p:null,tr(i,t){return this._p||(this._p=new bt({locale:flexbe_cli.vars.page.language,phrases:this.translation})),this._p.tr(i,t)},parseMoney(i,t=2){let e=String(i).replace(/,/g,".").replace(/ /g,"").replace(/(?!^)-/g,"").replace(/^\./g,"0."),o=e.replace(/[^\d.]/g,""),n=((o.match(new RegExp(`\\.\\d{1,${t}}$`))||[])[0]||"").replace(/\D/g,""),s=o.replace(new RegExp(`\\.${n}$`),""),r=parseInt(s.replace(/[^\d-]/g,""),10)||0;parseInt(n,10)||(n="");let a=parseFloat(n?`${r}.${n}`:String(r));return/^-/.test(e)?-a:a},formatMoney(i,{currencyFormat:t=flexbe_cli.vars.site.currencyFormat,currencyData:e=flexbe_cli.vars.site.currencyData,freeLabel:o=!1,useNonBreakingSpace:n=!1}={}){if(i=parseFloat(i),!i&&o)return Je.tr("cart::free_price");let s=t.str,r=t.d,a=Math.abs(i)>=1e4?t.t:"",l=t.d_force||parseInt(String(i),10)!==i?e.decimals:0,u=Qe(Math.abs(i),l,r,a),c=u;return s&&(c=s.replace(":value",u).replace(":symbol",e.symbol),n&&(c=c.replace(/\s/g,"&nbsp"))),i<0&&(c=`-${c}`),c.trim()},formatNumber(i,t,e=this.currencyFormat){let o=e.d,n=Math.abs(i)>=1e4?e.t:"";return t=t??(e.d_force||parseInt(i,10)!==i?this.currencyData.decimals:0),Qe(i,t,o,n)},animateNumber({target:i,from:t,to:e,asMoney:o,freeLabel:n=!0,duration:s,easing:r}){if(!i)return!1;let a=$(i);t==null&&(t=this.parseMoney(a.text())||"");let l=Math.abs(t-e);if(t===e)return;if(i._animation&&(i._animation.pause(),i._animation.reset()),o&&(!e||!t)||l<3||typeof anime!="function")a.text(o?this.formatMoney(e,{freeLabel:n}):e);else{let c={value:t};s==null&&(s=Math.max(150,Math.min(l*.3,650))),r==null&&(r="linear"),i._animation=anime({targets:c,value:e,duration:s,easing:r,update:()=>{let p=Math.floor(c.value),f=o?this.formatMoney(p,{freeLabel:n}):p;a.text(f)},complete:()=>{let p=o?this.formatMoney(e,{freeLabel:n}):e;a.text(p)}})}},...flexbe_cli.locale},M=Je;var Ro=".js-hover",Ze="hover",ue={init(){this.adaptiveHoverInit(),this.initIosHacks(),this.initFontsHacks()},adaptiveHoverInit(){let i="touchstart.adaptive_hover_in";flexbe_cli.run.is_desktop&&(i=`${i} mouseenter.adaptive_hover_in`),$(document).on(i,Ro,t);function t(e){if(globalThis.accessabilityEnabled)return;let o=$(e.currentTarget),n=`adaptive_hover_out_${Math.floor(Math.random()*1e6)}`;o.addClass(Ze),flexbe_cli.run.is_desktop&&o.one(`mouseleave.${n}`,s),$(document).one(`touchend.${n}`,s);function s(){o.off(`.${n}`),$(document).off(`.${n}`),o.removeClass(Ze)}}},initIosHacks(i="body"){flexbe_cli.run.is_ios&&($("> *",i).off("click.iosHacks").on("click.iosHacks",()=>!0),$("a, [data-action-target]",i).off("click.iosHacks").on("click.iosHacks",()=>!0))},initFontsHacks(){if(!flexbe_cli.run.is_android)return;let i=getComputedStyle(document.documentElement),t=parseFloat(i.getPropertyValue("--1rem")),e=parseFloat(i.getPropertyValue("font-size")),o=t/e;o!==1&&!Number.isNaN(t)&&!Number.isNaN(o)&&document.documentElement.style.setProperty("--1rem",`${t*o}px`)}};var ti={content:"",contentAsHTML:!0,theme:"dark",animation:"fall",animationDuration:[250,180],delay:[180,100],position:"top",autoClose:!0,hideOnClick:!1,interactive:!1,distance:3,maxWidth:350,IEmin:12,trigger:"custom",triggerOpen:{click:!1,touchstart:!1,mouseenter:!0},triggerClose:{click:!1,originClick:!1,mouseleave:!0,touchleave:!0}},zo=async()=>{let i=flexbe_cli.vars,t=i.page.themeId,e=i.globals.versionId,o=()=>R(["/_s/lib/jquery/tooltipster/tooltipster.patched.min.js",`/_s/build/theme/${t}/_tooltipster.css?${e}`]);return document.readyState==="complete"?o():new Promise(n=>window.addEventListener("load",()=>o().then(n),{once:!0}))},ei={async init(i,t={}){var e,o;if(!i)return!1;await zo();let n,s=$(i),r={...ti,...t,content:(e=(o=t.content)!=null?o:s.attr("data-tip"))!=null?e:i.innerHTML};r.theme=`tooltipster-${(s.attr("data-theme")||r.theme||ti.theme).replace("tooltipster-","")}`,r.maxWidth=parseInt(s.attr("data-width"),10)||r.maxWidth,r.position=s.attr("data-tip-position")||r.position;let a=r.content||"";if($.fn.tooltipster==null)return console.warn("Tooltipster is not loaded"),!1;try{n=s.tooltipster("instance")}catch{}if(!(!n&&!a))return n?(clearTimeout(n._contentTmt),a&&a!==n.content()?(n.content(a),n.enable()):a||this.destroy(i)):(i.tooltipstered=!0,s.tooltipster(r),n=s.tooltipster("instance"),n.on("created",()=>{s.attr("data-tooltipstered","true"),n._$tooltip.addClass("editor-ui")}),n.on("destroy",()=>{i.tooltipstered=!1,s.removeAttr("data-tooltipstered")}),n.on("ready",()=>{n.reposition()})),t.show&&n.open(),n},destroy(i){if(!i)return!1;let t,e=$(i);try{t=e.tooltipster("instance")}catch{}t&&(t.destroy(),i.tooltipstered=!1,e.removeAttr("data-tooltipstered"))}};var ii=!1,de="f_cookies_allowed",fe=class{constructor(){this.cookieApplied=!1,this.observer=null,this.params={show:0,consent_mode:"click",use_custom_warning_text:0,custom_warning_text:"",policy_uri:"",style:"right_bottom",show_decline_button:1,decline_button_text:"",button_text:"",link_text:"",use_policy:0}}init(){setTimeout(()=>requestAnimationFrame(()=>{this.params={...this.params,...flexbe_cli.vars.site.cookiesWarning||{}},!(flexbe_cli.is_admin||flexbe_cli.vars.globals.isService||flexbe_cli.theme_id===99||!this.params.show||localStorage.getItem(de)||ii)&&this.createNotify()}),1e3)}createNotify(){let t=this.params,e=$("body"),o=P.viewportHeight/2,n="/\\r\\n|\\r|\\n/g",s=flexbe_cli.scroll.latest,r=0;ii=!0,+t.use_custom_warning_text&&t.custom_warning_text?this.content=t.custom_warning_text.replace(n,"<br />"):this.content=flexbe_cli.locale.tr(t.style==="center_compact"?"cookies::compact_text":"cookies::long_text");let a=t.button_text&&t.use_custom_warning_text?t.button_text.replace(n,"<br />"):flexbe_cli.locale.tr("cookies::button"),l=t.decline_button_text&&t.use_custom_warning_text?t.decline_button_text.replace(n,"<br />"):flexbe_cli.locale.tr("cookies::button_decline"),u=t.link_text?t.link_text.replace(n,"<br />"):flexbe_cli.locale.tr("cookies::button_link"),c=t.policy_uri?t.policy_uri.replace(n,"<br />"):"/legal/cookie-policy/",p=+t.use_policy?"show":"",f=t.consent_mode==="click"||t.style!=="center_compact",m=+t.show_decline_button&&t.consent_mode==="click",d=t.style==="center_long"?"is-dark":"is-light",h=m?`
            <div class="cookies-button decline scrollable show">
                ${l}
            </div>
        `:"",g=f?`
            <div class="cookies-button primary scrollable show">
                ${a}
            </div>
        `:"",b=t.style==="popup"?'<div class="cookies-overlay"></div>':"",_=t.consent_mode!=="click"&&["popup","right_bottom","center_compact"].includes(t.style)?`
            <div class="cookies-close">
                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 6L13 0L14 1L8 7L14 13L13 14L7 8L1 14L0 13L6 7L0 1L1 0L7 6Z"/>
                </svg>
            </div>
        `:"",w=$(`
            <div class="cookies-wrap style--${t.style} ${d}">
                ${b}
                <div class="cookies-container">
                    <div class="cookies-content scrollable">
                        <span>
                            ${this.content}
                            <a href="${c}" target="_blank" class="cookies-button-more ${p}">
                             ${u}
                            </a>
                        </span>
                    </div>
                    ${m||f?`
                        <div class="cookies-button-container">
                            ${h}
                            ${g}
                        </div>
                    `:""}
                    ${_}
                </div>
            </div>
        `);e.find(".cookies-wrap").remove(),e.append(w),this.setupBodyObserver(e,w),t.style==="popup"&&flexbe_cli.scroll.scrollLock.lock();let y=()=>{let x=$(".cookies-wrap");x.removeClass("show"),e.removeClass("cookies-warning--show"),t.style==="popup"&&flexbe_cli.scroll.scrollLock.unlock(),this.observer&&(this.observer.disconnect(),this.observer=null),setTimeout(()=>{x.remove()},1e3)},j=()=>{localStorage.setItem(de,"declined")},D=()=>{this.cookieApplied||(this.cookieApplied=!0,typeof window.applyCookies=="function"&&window.applyCookies(),localStorage.setItem(de,"allowed"),document.removeEventListener("scroll",Z),$(document).off("click.cookies"))},Z=()=>{let x=Math.max(flexbe_cli.scroll.latest-s,s-flexbe_cli.scroll.latest);clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{s=flexbe_cli.scroll.latest,r+=x,r>=o&&D()},200)};t.consent_mode==="open"?D():t.consent_mode==="interaction"&&setTimeout(()=>{document.addEventListener("scroll",Z,{passive:!0})},500),w.outerWidth(),w.addClass("show"),e.addClass("cookies-warning--show"),w.on("click.cookies",".cookies-button.primary, .cookies-close",()=>{y(),D()}),w.on("click.cookies",".cookies-button.decline",()=>{j(),y()}),t.consent_mode==="interaction"&&$(document).on("click.cookies","a, [data-component]",()=>D())}setupBodyObserver(t,e){this.observer=new MutationObserver(o=>{o.forEach(n=>{n.type==="childList"&&e.length&&e[0]!==t.children().last()[0]&&t.append(e)})}),this.observer.observe(t[0],{childList:!0})}},oi=new fe;var ni=!1,ot,si=i=>{if(!ot.size){ni=!1;return}requestAnimationFrame(si),ot.forEach((t,e)=>{if(t.last>=i)return;let o=typeof t.fps=="function"?t.fps():t.fps;(!isFinite(o)||!o||i-t.last>=1e3/o)&&(t.last=i,e(i))})};function ri(i,t=0){return ot||(ot=new Map),ot.set(i,{last:0,fps:t}),ni||requestAnimationFrame(si),()=>{ot.delete(i)}}var pe,he,ai=!0,No=100,Bo=200,Vo=150,Q="position-fixed",qo="position-sticky",me={map:[],createMap(){return $('[data-is="block"][data-fixed="true"]').toArray().map((t,e)=>{let o=$(t),n=o.attr("data-fixed-wrapper")||"self",s=o.attr("data-fixed-ignore-adaptive"),r=n==="self"?o:o.find(n),a=o.find(".fixed-area").eq(0);if(!a.length||!r.length)return null;let l=!!o.data("fixed-animation"),u=!!o.data("sticky"),c=a.closest("[data-static-contrast]").attr("data-static-contrast")||a.closest("[data-contrast]").attr("data-contrast"),p=a.closest("[data-fixed-contrast]").attr("data-fixed-contrast")||c,f=Math.round(r.outerHeight()),{top:m}=Lt(r[0])||{},d=m+f,h=f;return l&&(a.hasClass(Q)?h=Math.round(a.outerHeight()):(a.addClass(Q),h=Math.round(a.outerHeight()),a.removeClass(Q))),{index:e,$block:o,$wrap:r,$fixed:a,top:m,bottom:d,height:f,heightFixed:h,contrastStatic:c,contrastFixed:p,isSticky:u,ignoreAdaptive:s,hasFixedAnimation:l,isFixed:!1,isReplaced:!1}}).filter(t=>{if(!t)return!1;let e=flexbe_cli.resize.responsiveMode,o=t.$block.attr("data-hidden");return!(e===o||e==="mobile"&&t.ignoreAdaptive)})},modifyMap(i,t){let e=0,o=0;return i.forEach((n,s)=>{let r=s&&i[s-1],a=Math.max(0,(r?.bottom||0)-n.top),l=t+e-a;n.isFixed=n.hasFixedAnimation?l>n.bottom+No:l>n.top,n.fixOffset=e-a,n.isSticky&&n.isFixed&&(e+=n.heightFixed-a),n.isFixed&&(o+=n.heightFixed),n.replaceOffset=0,r&&!r.isSticky&&t+r.fixOffset+r.heightFixed>n.top&&(r.replaceOffset=Math.min(r.fixOffset+r.heightFixed,t+r.fixOffset+r.heightFixed-n.top))}),{allFixedHeight:o}},applyMap(i,t){let e=!i.applied&&!ai;i.forEach(o=>{let n=o.$fixed[0].isFixed,s=o.isFixed,r=o.isSticky;if(flexbe_cli.run.is_preview||(s=!1,r=!1),n!==s||e)if(o.$fixed[0].isFixed=s,o.$fixed.toggleClass(qo,s&&r),o.contrastStatic&&o.contrastStatic!==o.contrastFixed&&o.$fixed.attr("data-contrast",s?o.contrastFixed:o.contrastStatic),o.hasFixedAnimation)if(clearTimeout(o._fixedAnimationBouncer),s)o.$wrap.css("height",`${o.height}px`),o.$fixed.removeClass("fade-out"),!o.replaceOffset&&!o.$fixed.hasClass(Q)&&(o.$fixed.addClass(`${Q} fade-in`),o._fixedAnimationBouncer=setTimeout(()=>{o.$fixed.removeClass("fade-in")},Bo));else{let a=t>o.height;o.$fixed.removeClass("fade-in"),!o.replaceOffset&&i.applied&&a&&o.$fixed.addClass("fade-out"),o._fixedAnimationBouncer=setTimeout(()=>{o.$wrap.css("height",""),o.$fixed.removeClass(`${Q} fade-out`)},a?Vo:0)}else o.$wrap.css("height",s?`${o.height}px`:""),o.$fixed.toggleClass(Q,s);if(s?(o.$fixed[0].style.setProperty("top",`${o.fixOffset}px`,"important"),o.$fixed[0].style.setProperty("transform",o.replaceOffset?`translateY(-${o.replaceOffset}px)`:"none","important")):(o.$fixed[0].style.removeProperty("top"),o.$fixed[0].style.removeProperty("transform")),n!==s){let a=o.$block[0]._core;a&&a.updateTween({fixed:s})}}),ai=!1,i.applied=!0,this.map=i},getAllFixedHeight(i){let{allFixedHeight:t}=this.modifyMap($.extend([],this.map||[]),i);return t},initFixed(){let i=this.createMap();he=null,pe&&pe(),i.length&&(pe=ri(()=>{let t=window.scrollY;he!==t&&(he=t,this.modifyMap(i,t),this.applyMap(i,t))},i.length>1?90:30))},init(){new ResizeObserver(()=>{this.initFixed()}).observe(document.body)}};var ge=class{constructor(t,e={}){this.components=null,this.inited=!1,this.updated=!1,this.loaded=!1,this.ready=!1,this.isPure=!1,this.isVisible=null,this.inScreen=!1,this.inBeside=!1,this.inView=!1,this.inFocus=!1,this.wasVisible=null,this.wasScreen=!1,this.wasBeside=!1,this.wasView=!1,this.wasFocus=!1,this.$area=void 0,this.area=void 0,this.$content=void 0,this.content=void 0,this.$root=void 0,this.root=void 0,this.is=void 0,this.id=void 0,this.template_id=void 0,this.tween=void 0,this.type=void 0;let o=$(t),n=o.attr("data-is"),s=o.attr("data-id"),r=n==="zone"?"e":n[0],a=o.attr(`data-${r}-id`);this.$area=o,this.area=o[0],this.$content=o,this.content=this.$content[0],this.$root=o,this.root=o[0],this.is=n,this.id=s,this.template_id=a,this.tween={},this.type=JSON.parse(o.attr(`${r}-type`)||"[]"),Object.keys(e).forEach(l=>{let u=Object.getOwnPropertyDescriptor(e,l);if("value"in u){let c=e[l];typeof c=="object"?this[l]=$.extend(!0,Array.isArray(c)?[]:{},c):this[l]=c}else Object.defineProperty(this,l,u)}),["_onVisible","_onBeside","_onFocus","_onScreen","_onView","_onResize","_onOpen","_onClose","_sendEvent"].forEach(l=>{this[l]=this[l].bind(this)})}onInit(t){}onUpdate(t){}onLoad(t){}onDestroy(t){}onVisible(t){}onBeside(t){}onFocus(t){}onScreen(t){}onView(t){}onResize(t){}onOpen(t){}onClose(t){}onMsg(t,e){}init(t="init",e={}){this.components=(this.components||[]).filter(o=>o&&typeof o=="function"),t==="init"?this._onInit(e):t==="update"&&this._onUpdate(e),this._inheritEvents(),(t==="init"||t==="update"&&e.templateRendered)&&this._onLoad(e)}_inheritEvents(){"onHideShowUI"in this&&(flexbe_cli.events.off(`hideShowUI.core_${this.id}`),flexbe_cli.events.on(`hideShowUI.core_${this.id}`,t=>{var e;return(e=this.onHideShowUI)==null?void 0:e.call(this,t)}))}_sendEvent(t,e){let o=new CustomEvent(t,{detail:e});this.area.dispatchEvent(o)}_onInit(t){this.inited=!0,this.onInit(t),this._sendEvent("init",t),requestAnimationFrame(()=>this.updateTween())}_onUpdate(t){this.inited=!0,this.onUpdate(t),this._sendEvent("update",t),this.updateTween({force:!0})}_onLoad(t){this.loaded=!0,this.onLoad(t),this._sendEvent("load",t)}_onResize(t={}){this.isVisible&&(this.onResize(t),this._sendEvent("resize",t))}_onDestroy(t){this.$area.off(".inherit"),this.onDestroy(t),this._sendEvent("destroy",t)}_onMsg(t,e){this.onMsg(t,e)}_onVisible({state:t,force:e}){if(this.isVisible==null){this.isVisible=t,this.wasVisible=t;return}if(this.isVisible===t&&!e)return;let o=t?!this.wasVisible:void 0,n=o==null?{state:t}:{state:t,first:o};this.isVisible=t,this.onVisible(n),this._sendEvent("visible",n),t&&(this.wasVisible=!0)}_onFocus({state:t,force:e}){if(this.isVisible||(t=!1),this.inFocus===t&&!e)return;let o=t?!this.wasFocus:void 0,n=o==null?{state:t}:{state:t,first:o};this.inFocus=t,this.onFocus(n),this._sendEvent("focused",n),t&&(this.wasFocus=!0)}_onScreen({state:t,force:e}){if(this.isVisible||(t=!1),this.inScreen===t&&!e)return;let o=t?!this.wasScreen:void 0,n=o==null?{state:t}:{state:t,first:o};this.inScreen=t,this.onScreen(n),this._sendEvent("screen",n),t&&(this.wasScreen=!0)}_onView({state:t,force:e}){if(this.isVisible||(t=!1),this.inView===t&&!e)return;let o=t?!this.wasView:void 0,n=o==null?{state:t}:{state:t,first:o};this.inView=t,this.is==="block"&&o&&requestAnimationFrame(()=>{Ft.startTransitions(this.$area)}),this.onView(n),this._sendEvent("view",n),t&&(this.wasView=!0)}_onBeside({state:t,force:e}){if(this.isVisible||(t=!1),this.inBeside===t&&!e)return;let o=t?!this.wasBeside:void 0,n=o==null?{state:t}:{state:t,first:o};this.inBeside=t,this.onBeside(n),this._sendEvent("beside",n),t&&(this.wasBeside=!0)}updateTween(t={}){}_onOpen(t){this.updateTween(),this.onOpen(t),this._sendEvent("open",t)}_onClose(t){this.updateTween(),this.onClose(),this._sendEvent("close",t)}},G=ge;var be=class extends G{constructor(t,e){super(t,e),this.is="block",this.$block=this.$area,this.$content=this.$area.find("> .container-fluid").addBack().last(),this.content=this.$content[0],this.abtestVariant=this.$area.attr("data-abtest-variant"),this.abtestId=this.abtestVariant&&this.$area.attr("data-abtest-id")}_onUpdate(t){this.$content=this.$area.find("> .container-fluid").addBack().last(),this.content=this.$content[0],super._onUpdate(t)}updateTween({force:t=!1,fixed:e=!1}={}){if(!this.inited)return!1;let o=this.area,n=0,s=o.offsetWidth,r=o.offsetHeight;for(;o;)n+=o.offsetTop,o=o.offsetParent;let a=n+r,l=!!(s||r),u=this.tween.width==null&&this.tween.height==null,c=t||s!==this.tween.width||r!==this.tween.height,p=_(),f=w(),m=y();this.tween.start=n,this.tween.end=a,this.tween.width=s,this.tween.height=r,this.tween.position=p,this.tween.positionAbs=f,this.tween.positionCenter=m;let d=l&&m>0&&m<1,h=d||D(),g=h||j(),b=g||Z();return this._onVisible({state:l}),!u&&c&&this._onResize({force:t}),this._onBeside({force:t,state:b}),this._onScreen({force:t,state:g}),this._onView({force:t,state:h}),this._onFocus({force:t,state:d}),this._sendEvent("tween",{tween:this.tween,force:t}),c;function _(){return 1/(r||1)*(flexbe_cli.scroll.latest-n)}function w(){let x=n-flexbe_cli.resize.clientHeight;return 1/(a-x)*(flexbe_cli.scroll.latest-x)}function y(){let x=r||1,tt=flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight/2,Ni=n+x/2;return(tt-Ni+x/2)/x}function j(){return e?!0:f>=0&&f<=1}function D(){if(e)return!0;let x=Math.min(r/3,flexbe_cli.resize.clientHeight/4);return flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight>=n+x&&flexbe_cli.scroll.latest<=a-x}function Z(){if(e)return!0;let x=Math.max(r/2,flexbe_cli.resize.clientHeight/3);return flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight>n-x&&flexbe_cli.scroll.latest<a+x}}},li=be;var _e=class extends G{constructor(t,e){super(t,e),this.is="element";let o=this.$area.closest("[data-cloned]");this.isClone=o.attr("data-cloned")||!1,this.$content=this.$area.find("> .element-content").addBack().last(),this.content=this.$content[0],this.$root=this.$area.closest(".b_block, .m_modal, .w_widget"),this.root=this.$root[0];let n=flexbe_cli.entity.closestEntity(this.area.parentNode);n?(this.$parent=n.$area,this.parent=n.area):(this.$parent=this.$area.parents("[data-is]").eq(0),this.parent=this.$parent[0],console.warn("Parent core instance not created for element",this.area))}_onUpdate(t){this.$area.off(`.inherit.${this.id}`),this.$content=this.$area.find("> .element-content").addBack().last(),this.content=this.$content[0],super._onUpdate(t)}_onDestroy(t){super._onDestroy(t),this.$area.off(".inherit"),this.$parent.off(`.inherit.${this.id}`)}_inheritEvents(){super._inheritEvents();let t=`.inherit.${this.id}.${this.isClone?`clone${Number(this.isClone)}`:"original"}`;this.$parent.off(t),this.$parent.on(`tween${t}`,e=>{this.updateTween(e.detail||{})}),["visible"].forEach(e=>{this.$parent.on(`${e}${t}`,()=>{this.updateTween({})})}),["_onOpen","_onClose","_onDestroy"].forEach(e=>{let o=`${e.replace("_on","").toLowerCase()}${t}`;this.$parent.on(o,(n,...s)=>{!s.length&&n.detail&&(s[0]=n.detail),this[e](...s)})})}updateTween({force:t}={}){let e=this.content||this.area,o=this.parent&&this.parent._core,n=this.root&&this.root._core;if(!o||!this.inited)return;let s=this.tween.width==null&&this.tween.height==null,r=o.isVisible,a=o.inBeside,l=a,u=l,c=l,p=!1;if(!(s&&o.isVisible&&!a)){if(r&&a){let f=e.offsetWidth,m=e.offsetHeight,d=flexbe_cli.resize.clientHeight;if(r=!!(f||m),p=t||f!==this.tween.width||m!==this.tween.height,this.tween.width=f,this.tween.height=m,r&&n&&n.is==="block"){let{top:h,bottom:g}=e.getBoundingClientRect();a=g>-(d/3)&&h<d+d/3,l=a&&l&&g>0&&h<d,c=l&&c&&h<=d/2&&h+m>=d/2;let b=Math.min(m/3,flexbe_cli.resize.clientHeight/4);u=c||l&&u&&h+b>0&&g-b<d}}this.isVisible!==r&&this._onVisible({force:t,state:r}),!s&&p&&this._onResize({force:t}),this._onBeside({force:t,state:a}),this._onScreen({force:t,state:l}),this._onView({force:t,state:u}),this._onFocus({force:t,state:c}),this._sendEvent("tween",{tween:this.tween,force:t})}}},ve=_e;var jo=()=>!(flexbe_cli.is_admin&&(window.parent.flexbe.modal.visible||[]).length),L={opened:new Map,$list:$(".modal-list"),init(){let i=new URLSearchParams(location.search).get("m_id");if(flexbe_cli.vars.globals.isScreenshot&&i)return this.$list.addClass("noanimate"),this.open({id:i}),!1;this.dispatchEvents()},dispatchEvents(){let i=$("body");i.on("bringIntoView.core-modal",".m_modal",s=>{let r=s.currentTarget.dataset.id;r&&this.open({id:r})}),flexbe_cli.events.on("ui_modal_open.core_modal",(s={})=>{this.open(s)}),flexbe_cli.events.on("ui_modal_close.core_modal",(s={})=>{this.close(s)}),i.on("click.modal-close",".m_modal .close",s=>{s.preventDefault();let a=$(s.currentTarget).closest(".m_modal.show").attr("data-id");this.close({id:a})});let t,e,o,n={x:0,y:0};i.off(".modal-close-overlay"),i.on("click.modal-close-clickout",".container-list",()=>{!flexbe_cli.run.is_preview||!this.opened.size||this.opened.forEach((s,r)=>{let{modal:a}=this.find(r)||{};a!=null&&a.hasAttribute("data-clickout")&&this.close({id:a.id})})}),i.on("pointerdown.modal-close-overlay pointerup.modal-close-overlay","[data-overlay]",s=>{if(!(!flexbe_cli.run.is_preview||!this.opened.size))if(s.type==="pointerdown"){let r=document.body.getBoundingClientRect();o=s.target===s.currentTarget||$(s.target).is(".modal-data")?s.target:null,n={x:s.pageX,y:s.pageY},t=s.target.clientWidth<=s.pageX,e=r.left>n.x||r.right<n.x}else o===s.target&&!t&&!e&&Math.sqrt((s.pageX-n.x)**2+(s.pageY-n.y)**2)<10&&setTimeout(()=>{this.close({id:$(o).closest(".m_modal").attr("data-id")})},50)}),$(window).off(".modal-close-esc").on("keyup.modal-close-esc",s=>{if(flexbe_cli.run.is_preview&&s.which===27&&jo()&&this.opened.size){let r=[...this.opened.keys()].at(-1);this.close({id:r})}})},find(i){if(this.$list==null||!this.$list.length)return!1;let t=this.$list.find(`[data-id="${i}"]`);t.length||(t=this.$list.find(`._anchor[name="${i}"]`).closest(".m_modal"));let e=t.toArray(),o=e[0];return o?{modals:e,modal:o}:null},open({id:i,data:t={},options:e={}}={}){let{modal:o}=this.find(i)||{};if(!o)return console.warn("Modal not found",i),!1;let n=nt.bind(o);if(!n)return console.warn("Modal without core object,",`id: ${i},`,"modal: ",o),!1;let s=[...this.opened.keys()].at(-1);return!e.rise&&s&&s!=i&&this.close({id:s,openId:i}),this.opened.has(i)||(this.opened.set(i,{fromId:s,data:t,options:e}),n.open({fromId:s,data:t,options:e})),n.$area.css("zIndex",this.opened.size),!0},close({id:i,openId:t}={}){if(!i)return this.opened.forEach((n,s)=>{s!==t&&this.close({id:s,openId:t})});if(!this.opened.has(i))return!1;let{modal:e}=this.find(i)||{};if(!e)return;let o=nt.bind(e);return o?(o.close({openId:t}),o.$area.css("zIndex",""),this.opened.delete(i),!0):(console.warn("Modal doesnt have core object"),!1)}};var ci=(i,t=0)=>(...e)=>new Promise(o=>{setTimeout(()=>o(i(...e)),t)}),st=(i,t=0)=>flexbe_cli.is_admin?i:ci(i,t),k=(i,t=0,...e)=>ci(i,t)(...e),rt=(i,t=0,...e)=>st(i,t)(...e),_t=(i,t=1)=>Array.from({length:Math.ceil(i.length/t)},(e,o)=>i.slice(o*t,o*t+t));var ye=class extends G{constructor(t,e){super(t,e),this.is="modal",this.isOpen=!1,this.$modal=this.$area}_onInit(t){super._onInit(t),flexbe_cli.is_admin&&L.opened.has(this.id)&&this.open(L.opened.get(this.id))}open({fromId:t,data:e,options:o={}}={}){var n,s;if(this.isOpen)return;this.isOpen=!0,this.lastOptions=o,this.lastScroll=z.latest;let r=this.$area.find(".modal-data > ._anchor").attr("name")||this.id;(o.hash||o.hash==null)&&(this._prevHash=window.location.hash,flexbe_cli.lockPopstate=!0,window.history.pushState(null,null,`#${r}`),flexbe_cli.lockPopstate=!1),L.$list.addClass("show"),this.$area.removeClass("noanimate"),this.$area.addClass("show"),flexbe_cli.run.is_preview&&this.$area.addClass("animation-forwards"),$("body").addClass("is-modal-open"),$('[data-w-id="CART"].show, .w_widget.show').length&&L.$list.addClass("rise");let a=this.$modal.find(".component-button").eq(0),l=(n=(s=a.offset())==null?void 0:s.top)!=null?n:0;!flexbe_cli.run.is_screen_mobile&&flexbe_cli.run.is_preview&&flexbe_cli.resize.viewportHeight>l+100&&a.focus(),setTimeout(()=>{this.$area.hasClass("pointerless")||z.scrollLock.lock(),L.$list.addClass("overlay"),this._onOpen({data:e}),this._onBeside({state:!0}),this._onScreen({state:!0}),this._onView({state:!0}),this._onFocus({state:!0}),typeof o.onOpen=="function"&&o.onOpen()},30),v.trigger("modal_opened",{id:this.id,fromId:t,data:e,options:o})}close({openId:t}={}){if(!this.isOpen)return;let e=this.lastOptions,o=!t&&!this.$area.siblings(".show").length;if(this.lastOptions={},this.isOpen=!1,(e.hash||e.hash==null)&&o&&/^#{1,2}/.test(window.location.hash)){let s=!this._prevHash||this._prevHash===window.location.hash?window.location.pathname:this._prevHash;flexbe_cli.lockPopstate=!0,window.history.replaceState(null,null,s),flexbe_cli.lockPopstate=!1}this.$area.removeClass("animation-forwards").addClass("noanimate");let n=parseInt(this.$area.css("--animationDuration"),10)||450;this.$area.removeClass("show noanimate"),flexbe_cli.run.is_preview&&this.$area.addClass("animation-backwards"),setTimeout(()=>{this.$area.removeClass("show hide animation-backwards"),o&&(L.$list.removeClass("show rise overlay fade-out"),window.location.hash!=="#cart"&&!this.$area.hasClass("pointerless")&&z.scrollLock.unlock(),$("body").removeClass("is-modal-open")),flexbe_cli.run.is_screen_mobile&&$("body, html").scrollTop(this.lastScroll)},flexbe_cli.is_admin?0:n),this._onClose(),this._onBeside({state:!1}),this._onScreen({state:!1}),this._onView({state:!1}),this._onFocus({state:!1}),typeof e.onClose=="function"&&e.onClose(this),v.trigger("modal_closed",{id:this.id,openId:t})}updateTween({force:t}={}){if(!this.inited)return!1;let e=this.area,o=e.offsetWidth,n=e.offsetHeight,s=this.tween.width==null&&this.tween.height==null,r=t||o!==this.tween.width||n!==this.tween.height,a=this.isOpen;return this.tween.width=o,this.tween.height=n,this._onVisible({force:t,state:a}),rt(()=>{!s&&r&&this._onResize({force:t}),this._onBeside({force:t,state:a}),this._onScreen({force:t,state:a}),this._onView({force:t,state:a}),this._onFocus({force:t,state:a})}),rt(this._sendEvent,0,"tween",{tween:this.tween,force:t}),r}},ui=ye;function B(i,t){if(!{}.hasOwnProperty.call(i,t))throw new TypeError("attempted to use private field on non-instance");return i}var Ho=0;function we(i){return"__private_"+Ho+++"_"+i}var Wo=["id","is","area","content","isVisible","inBeside","inView","inFocus","inScreen","wasBeside","wasFocus","wasScreen","wasView","wasVisible"],Go={beside:"beside",screen:"screen",view:"view",focus:"focused",visible:"visible",resize:"resize",open:"open",close:"close"};function di(i){return i.split(" ").map(t=>{let[e,...o]=t.split(".");return[Go[e]||e,...o,"publicApi"].join(".")}).join(" ")}var V=we("instances"),J=we("core"),vt=we("callbacks"),at=class i{static create(t){return B(i,V)[V][t.id]&&B(i,V)[V][t.id].destroy(),B(i,V)[V][t.id]=new i(t),B(i,V)[V][t.id]}get size(){return{width:B(this,J)[J].tween.width,height:B(this,J)[J].tween.height}}constructor(t){Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,vt,{writable:!0,value:new Map}),B(this,J)[J]=t;let e=Wo.reduce((o,n)=>{let s={...o};return s[n]={enumerable:!0,get(){return t[n]}},s},{});Object.defineProperties(this,e)}trigger(t,e){if(!t||typeof t!="string")return this;let o=new CustomEvent(t,{detail:e});return this.area.dispatchEvent(o),this}on(t,e){if(!t||typeof t!="string"||typeof e!="function")return this;let o=di(t),n=s=>e.call(this,s.detail||s.originalEvent,s.originalEvent||s);return $(this.area).on(`${o}`,n),B(this,vt)[vt].set(e,n),this}off(t,e){let o=di(t);return typeof e=="function"?$(this.area).off(o,B(this,vt)[vt].get(e)):$(this.area).off(o),this}destroy(){$(this.area).off(".publicApi")}};Object.defineProperty(at,V,{writable:!0,value:{}});var xe=class extends G{constructor(t,e){super(t,e),this.is="widget",this.$widget=this.$area}updateTween({force:t}={}){if(!this.inited)return!1;let e=this.area,o=e.offsetWidth,n=e.offsetHeight,s;this.isOpen!=null?s=!!this.isOpen:s=!!(o||n);let r=this.tween.width==null&&this.tween.height==null,a=!!t||o!==this.tween.width||n!==this.tween.height;return a&&(this.tween.width=o,this.tween.height=n),this._onVisible({force:t,state:s}),rt(()=>{!r&&a&&this._onResize({force:t}),this._onBeside({force:t,state:s}),this._onScreen({force:t,state:s}),this._onView({force:t,state:s}),this._onFocus({force:t,state:s})}),rt(this._sendEvent,0,"tween",{tween:this.tween,force:t}),a}},fi=xe;var $e=new WeakMap,Ae=new WeakMap;function pi(i,t,e){$e.set(i,setTimeout(()=>{$e.delete(i),e&&e()},t))}function lt(i,t,e=80){let o=typeof i=="object"?i:document.querySelector(`[data-id="${i}"]`),n=o?._core;if(n){if($e.get(n)){Ae.set(n,!0);return}n.updateTween({force:t}),pi(n,e,()=>{Ae.get(n)&&(Ae.set(n,!1),n.updateTween({force:t}),pi(n,e))})}}var hi={block:li,modal:ui,widget:fi,element:ve,zone:ve},mi={block:"data-b-id",modal:"data-m-id",widget:"data-w-id",zone:"data-e-id",element:"data-e-id",default:"data-t-id"},Uo=["beside","screen","focus","visible"],gi=new Map,bi=new WeakMap;function _i(i){let t="[data-is]",e=$(i);return[...e.filter(t).toArray(),...e.find(t).toArray()]}var nt={async init(){this._dispatchEvents(),await Promise.all([this.initArea($(".w_widget")),this.initArea(flexbe_cli.block.$list)]),await this.initArea(flexbe_cli.modal.$list)},async initArea(i,t={}){He(i);let e=_i(i),o=await Promise.all(_t(e,200).map(st(s=>s.map(r=>this.bind(r,t))))),n=(await Promise.all(o.flat())).filter(Boolean);return await Promise.all(n.map(s=>s.loaded||new Promise(r=>s.area.addEventListener("load",r,{once:!0})))),flexbe_cli.components.initInArea(i,t.templateRendered?"update":"init"),n},destroyArea(i,t={}){_i(i).forEach(o=>{let n=o._core;n&&(n._onDestroy(t),delete o._core)}),flexbe_cli.components.destroyInArea(i)},setClientJs(i,t,e){var o;gi.set(`${i}:${t}`,e),(o=e.components)==null||o.forEach(n=>{flexbe_cli.components.registerComponent(n)})},getClientJs(i,t){return i==="zone"&&(i="element"),gi.get(`${i}:${t}`)},bind(i,t={},e=!1){if(!i||!i.getAttribute)return null;let o=i.getAttribute("data-is");o=o==="zone"?"element":o;let n=i.getAttribute(mi[o]||mi.default);if(!n||!(o in hi))return null;let s=!i._core||!i._core.inited,r=!s&&(t.templateRendered||t.styleRendered),a=this.getClientJs(o,n)||{};if(a.isPure&&!e&&!i._core)return null;let l=i._core||new hi[o](i,a);return i._core=l,l&&(s||r)&&l.init(r?"update":"init",t),l},closestEntity(i,t=!1){let e;for(;i&&!e;){var o;if(i=(o=i)==null?void 0:o.closest("[data-id]"),!i||(e=this.bind(i,{},t),e))break;i=i.parentNode}return e},_dispatchEvents(){if(flexbe_cli.events.off(".core_entity"),flexbe_cli.events.on("forceUpdateTween.core_entity",(i,t)=>{lt(i,t)}),flexbe_cli.is_admin){let i=t=>document.querySelector(`[data-id="${t}"]`);flexbe_cli.events.on("layout_change.core_entity",t=>{t.action==="remove"&&this.destroyArea(i(t.id),t)}),flexbe_cli.events.on("entity_render:template:before.core_entity",async(t={})=>{let e=i(t.id);e&&this.destroyArea(e,t)}),flexbe_cli.events.on("entity_render:template.core_entity",async t=>{let e=i(t.id);e&&await this.initArea(e,t)}),flexbe_cli.events.on("client_msg.core_entity",t=>{if(!t||!t.id||!t.is)return;let e=i(t.id);e!=null&&e._core&&e._core._onMsg(t.msg,t.data)})}},createPublicAPI(i){let t,e=()=>(t||(t=document.querySelector(`[data-id="${i}"]`)),t),o=a=>{let l=this.closestEntity(a,!0);if(!l)return null;let u=bi.get(l);return u?u.destroy():(u=at.create(l),bi.set(l,u)),u},s={require:R,subscribe:(a,l,u)=>{let c=e();Uo.includes(a)&&o(c);let p=new AbortController,f=()=>p.abort(),m=d=>{var h;if(!d.currentTarget.contains(d.target))return;d.stopPropagation();let g=(h=d.detail.state)==null||h?"in":"out";(!u.state||u.state==="all"||u.state===g)&&(l(d),u.once&&f())};return c.addEventListener(a,m,{signal:p.signal}),f},sectionApi:null,modalApi:null,widgetApi:null,elementApi:null,isEditor:flexbe_cli.is_admin,isView:!flexbe_cli.is_admin},r={get(a,l,u){let c=e();return l==="elementApi"?o(c):l==="sectionApi"?o(c.closest(".b_block")):l==="modalApi"?o(c.closest(".m_modal")):l==="widgetApi"?o(c.closest(".w_widget")):Reflect.get(a,l,u)}};return new Proxy(s,r)}};var Ee={$list:$(".container-list").eq(0),$blocks:$(".b_block"),init(){this.dispatchEvents()},dispatchEvents(){let i=()=>{this.$blocks.each((t,e)=>lt(e,!1))};$(window).on("resized.flexbe_block",$.debounce(()=>i(),20)),$(document).on("documentresized.flexbe_block",$.debounce(()=>i(),20)),window.addEventListener("scroll",$.throttle(()=>{this.$blocks.each((t,e)=>lt(e,!1))},16*6),{passive:!0}),flexbe_cli.is_admin&&flexbe_cli.events.off("layout_change.flexbe_block").on("layout_change.flexbe_block",t=>{!t||!["layout","block"].includes(t.is)||(this.$blocks=$(".b_block"),this.$blocks.each((e,o)=>lt(o,!1)))})}};var Yo=i=>typeof i=="string"?new Date(i.slice(0,19).replace("T"," ")):i,vi=({date:i,timezone:t,format:e="date"})=>{if(!i||!t)return null;let o=new Date(Yo(i)),n=new Date,s=new Date(n.toLocaleString("en-US",{timeZone:t}));n.setMilliseconds(0),s.setMilliseconds(0);let r=n.getTime()-s.getTime(),a=o.getTime()-r;return e==="milliseconds"?a:new Date(a)};var Ko=i=>crypto.getRandomValues(new Uint8Array(i)),Xo=(i,t,e)=>{let o=(2<<Math.log(i.length-1)/Math.LN2)-1,n=-~(1.6*o*t/i.length);return(s=t)=>{let r="";for(;;){let a=e(n),l=n|0;for(;l--;)if(r+=i[a[l]&o]||"",r.length===s)return r}}},yi=(i,t=21)=>Xo(i,t,Ko);var Qo="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",pr=yi(Qo,8);var Se=(i=>{if(typeof process<"u"&&(i=process.env)!=null&&i.LOG_LEVEL){let t=process.env.LOG_LEVEL.toLowerCase();if(["debug","info","warn","error"].includes(t))return t}return"error"})();function Zo(i){let t=`[${i}]`;return{debug:(...e)=>{["debug"].includes(Se)&&console.debug(t,...e)},info:(...e)=>{["debug","info"].includes(Se)&&console.info(t,...e)},warn:(...e)=>{["debug","info","warn"].includes(Se)&&console.warn(t,...e)},error:(...e)=>{console.error(t,...e)}}}var vr=Zo("App");var wi=(i,t,e)=>!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length?!1:t.every((o,n)=>i?e.includes(o):e[n]===o);var Sr=wi.bind(null,!0),kr=wi.bind(null,!1);var Br=Object.freeze({value:"fill",title:"FILL",auto:!0,selectValue:"fill"}),Vr=Object.freeze({value:"auto",title:"AUTO",auto:!0,selectValue:"auto"}),qr=Object.freeze({value:"auto",title:"HUG",auto:!0,selectValue:"auto"}),jr=Object.freeze({value:"px",title:"PX",step:1,altStep:5}),Hr=Object.freeze({value:"pt",title:"PT",step:1,altStep:.1}),Wr=Object.freeze({value:"em",title:"EM",step:.1,altStep:.01}),Gr=Object.freeze({value:"rem",title:"REM",step:.1,altStep:.01}),Ur=Object.freeze({value:"vh",title:"VH",step:1,altStep:.1,tip:typeof tr=="function"&&tr("editor::units::vh_tip")}),Yr=Object.freeze({value:"vw",title:"VW",step:1,altStep:.1,tip:typeof tr=="function"&&tr("editor::units::vw_tip")}),Kr=Object.freeze({value:"cqw",title:"CQW",step:1,altStep:.1}),Xr=Object.freeze({value:"cqw",title:"CQH",step:1,altStep:.1}),Qr=Object.freeze({value:"ch",title:"CH",step:1,altStep:5,tip:typeof tr=="function"&&tr("editor::units::ch_tip")}),Jr=Object.freeze({value:"%",title:"%",step:1,altStep:.1});var on={click:globalThis.MouseEvent,auxclick:globalThis.MouseEvent,dblclick:globalThis.MouseEvent,mousedown:globalThis.MouseEvent,mouseup:globalThis.MouseEvent,mouseover:globalThis.MouseEvent,mousemove:globalThis.MouseEvent,mouseout:globalThis.MouseEvent,mouseenter:globalThis.MouseEvent,mouseleave:globalThis.MouseEvent,contextmenu:globalThis.MouseEvent,keydown:globalThis.KeyboardEvent,keyup:globalThis.KeyboardEvent,keypress:globalThis.KeyboardEvent,focus:globalThis.FocusEvent,blur:globalThis.FocusEvent,focusin:globalThis.FocusEvent,focusout:globalThis.FocusEvent,input:globalThis.InputEvent,change:globalThis.Event,submit:globalThis.Event,reset:globalThis.Event,touchstart:typeof globalThis.TouchEvent=="function"?globalThis.TouchEvent:globalThis.Event,touchmove:typeof globalThis.TouchEvent=="function"?globalThis.TouchEvent:globalThis.Event,touchend:typeof globalThis.TouchEvent=="function"?globalThis.TouchEvent:globalThis.Event,touchcancel:typeof globalThis.TouchEvent=="function"?globalThis.TouchEvent:globalThis.Event,scroll:globalThis.UIEvent,resize:globalThis.UIEvent,select:globalThis.UIEvent,wheel:globalThis.WheelEvent,drag:globalThis.DragEvent,dragstart:globalThis.DragEvent,dragend:globalThis.DragEvent,dragenter:globalThis.DragEvent,dragover:globalThis.DragEvent,dragleave:globalThis.DragEvent,drop:globalThis.DragEvent,copy:globalThis.ClipboardEvent,cut:globalThis.ClipboardEvent,paste:globalThis.ClipboardEvent,custom:globalThis.CustomEvent};function nn(i,t,e){var o;let n=(o=on[t])!=null?o:Event,s=new n(String(t),e);return[i.dispatchEvent(s),s]}function ke(i,t={}){return i?nn(i,t.type||"click",{bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,relatedTarget:t.relatedTarget}):!1}function Ai(i,t=!1){let e=$(i),o=t?{}:e.data("product");if(o===!1)return!1;if(o||(o=$(i).closest("[data-product-item]").find("[data-product-action]").data("product")),(o==null||typeof o!="object"||Array.isArray(o))&&(o={img:e.attr("data-product-image"),title:e.attr("data-product-name"),price:e.attr("data-product-price"),count:e.attr("data-product-count"),productId:e.attr("data-product-id"),variantId:e.attr("data-variant-id")}),typeof o=="object"&&!o.strict){let s;if(flexbe_cli.theme_id===4?(s=e.closest(".content-zone, .flexbe-card, .flexbe-column, .modal-content"),s.length||(s=e.parents("[data-item-id]").last())):s=e.closest("[data-item-id], .modal-data").eq(0),o={...o},o.count||(o.count=1),t||!o.img){let r=a=>{let l=a.find("[data-img-id]").eq(0),u=l.attr("data-img-id"),c=l.attr("data-img-ext"),p=c?null:l.attr("data-img-name");return u?{id:u,ext:c,name:p}:null};o.img=r(s)||r(s.closest(".flexbe-row"))}if(t||!o.title){var n;let r=s.find(".name, .title, .item-title, .text_title, .element-text--title, .text-style-h1, .text-style-h2, .text-style-h3, .text-style-h4, .text-style-title, .text-style-subtitle").not(".text-rotator").eq(0);r.length||(r=s.find('[class*="font-family-"]').eq(0)),o.title=((n=r[0])==null?void 0:n.innerText.trim())||""}if(t||!o.price&&o.price!==0){let r=a=>{let l=a.clone();flexbe_cli.is_admin&&l.find('[class*="editor-"]').remove(),l.find(".text-rotator").remove(),l.find(".component-image").remove(),l.find("del, s, strike").remove();let u=String(l[0]&&l[0].innerText||"").replace(/\n/g,"<br>").replace(/\.$/,"").replace(/\u00a0/g," "),c=u.match(/(?:\d?\D{0,2} ?)?[1-9](?:[ ,.]?\d{0,3}){2}(?:[,.]\d{1,2})?(?: ?\D)?/g)||[];return u=c.find(p=>p.includes(flexbe_cli.vars.site.currencyData.symbol))||c[0]||"",u=(u.match(/([\d\s]+[ ,.]\d+|[\d\s]+)/g)||[])[0],u?(u=M.parseMoney(u),u):null};o.price=r(e.closest(".element-item").find(".price, .item-price, .main-price, .element-text--price").eq(0))||r(e)||r(s.find(".price, .item-price, .main-price, .element-text--price").eq(0))||r(s)}}if(!o.id)if(o.productId){let s=flexbe_cli.ecommerce.productsStore.getProduct(o.productId);if(s){let a=s.currentVariant(o.variantId||"default").getCartData("image");o.id=`product_${o.productId}:${o.variantId||"default"}`,a.img=Ht(a.img[0]),o={...o,...a}}else o={}}else{let s=flexbe_cli.p_id,r=e.parents("[data-id], [data-item-id], [data-multivar]").toArray().map(l=>{let u=l.getAttribute("data-id")||l.getAttribute("data-item-id")||"",c=l.getAttribute("data-multivar")||"";return u+c}).join(":"),a=flexbe_cli.helpers.hashCode(o.title+o.price);o.id=`${s}_${r||0}:${a}`}return{type:o.productId?"product":"custom",...o}}var xi=i=>typeof i=="string"?new Date(i.slice(0,19).replace("T"," ")):i,Ie=({dateFrom:i,dateTo:t,timezone:e=(o=>(o=flexbe)==null||(o=o.vars)==null||(o=o.project)==null?void 0:o.timezone)()})=>{let o=vi({date:new Date,timezone:e,format:"milliseconds"}),n=new Date(xi(i)).getTime(),s=new Date(xi(t)).getTime();return!(i&&n>o||t&&s<o)};function sn(i){return i.type==="custom"||i.quantity===1/0||i.quantity===-1}function $i(i){return sn(i)?1/0:i.quantity}var I=[],yt=class extends E{constructor(){super(),this.initList()}dispatch(t,...e){let o=this[t];if(typeof o!="function")throw new Error(`Cart dispatch: action '${t}' doesnt exist`);let n=o.apply(this,e);return this.trigger("dispatch",{name:t,args:e,result:n}),n}initList(){let t=[];if(flexbe_cli.is_admin){let e=flexbe_cli.vars.page.language==="ru",o=flexbe_cli.vars.site.currencyData.code==="RUB";t=[{id:"default1",count:1,protect:!0,img:{unq_id:"default1",id:1000000945,ext:"jpg"},vendorCode:e?"\u0410\u0440\u0442\u0438\u043A\u0443\u043B: 1234":"SKU: 1234",title:e?"\u041F\u0440\u0438\u043C\u0435\u0440 \u0442\u043E\u0432\u0430\u0440\u0430":"Example Item",price:o?750:10},{id:"default2",count:2,protect:!0,vendorCode:e?"\u0410\u0440\u0442\u0438\u043A\u0443\u043B: 1234":"SKU: 1234",img:{unq_id:"default2",id:1000000948,ext:"jpg"},title:e?"\u0414\u0440\u0443\u0433\u043E\u0439 \u0442\u043E\u0432\u0430\u0440":"Another Item",price:o?2550:25}]}else try{t=JSON.parse(localStorage.getItem("f_cart"))||[],t=t.filter(e=>e&&+e.count)}catch(e){console.error(e)}this.dispatch("updateList",t)}getList(){return I}getItem(t){return I.find(e=>e.id===t)}getCount(){return I.reduce((t,e)=>t+e.count,0)}getTotal(){return I.reduce((t,e)=>(e.count&&e.price&&(t+=parseInt(String(e.count),10)*parseFloat(String(e.price))),t),0)}updateList(t){if(!Array.isArray(t))return null;if(t=t.map(e=>{var o;let n=this.getItem(e.id);if(typeof e.img=="string"){let r=jt(e.img);e.img=r&&{id:r.id,ext:r.ext}}else(o=e.img)!=null&&o.img_id&&(e.img={id:e.img.img_id,ext:e.img.img_ext,unq_id:String(e.img.unq_id||e.img.id)});if(e.img=e.img||null,e.type=e.type||"custom",e.price=e.price==null?null:parseFloat(e.price),n&&e.orderPrice==null){var s;e.orderPrice=(s=n.orderPrice)!=null?s:n.price}else e.orderPrice==null&&(e.orderPrice=e.price);return e.quantity=$i(e),e.count=Math.round(+e.count)||0,e}),flexbe_cli.run.is_preview)try{localStorage.setItem("f_cart",JSON.stringify(t))}catch{}return I=t,I}purchase(){flexbe_cli.stat.ecommerce.purchase(I),this.resetList()}resetList(){let t=[...I].filter(e=>e.protect);this.updateList(t)}addItem(t){if(!t.id)throw new Error("Cart add item: product ID is not defined");let e=[...I],o={...t,count:parseFloat(t.count)||1},n=this.getItem(o.id);if(n){let s=e.indexOf(n);o.count+=n.count,e.splice(s,1,o)}else e.push(o);return this.updateList(e),flexbe_cli.stat.ecommerce.add(o),e}removeItem(t){let e=this.getItem(t),o=[...I];return!e||e.protect?I:(o.splice(o.indexOf(e),1),flexbe_cli.stat.ecommerce.remove(e),this.updateList(o))}updateCount({id:t,count:e}){let o=this.getItem(t);if(!o)return null;let n=+o.count||0;e==="+"?o.count+=1:e==="-"&&o.count>0?o.count-=1:o.count=e===""?1:e,Number.isNaN(+o.count)&&(o.count=n),this.updateList(I);let s=o.count-n;return s>0?flexbe_cli.stat.ecommerce.add({...o,count:s}):s<0&&flexbe_cli.stat.ecommerce.remove({...o,count:-s}),o}normalizeListItems(t=I,e={price:!0,count:!1,unavailable:!1,banPriceless:!1}){let o=t.map(n=>{let s={...n};return e.price&&(s.orderPrice=n.price),e.count&&!q.settings.allowPreorder&&(s.count=Math.min(n.count,n.quantity)),s});return e.unavailable&&(o=o.filter(n=>!n.hidden&&n.count)),e.banPriceless&&(o=o.filter(n=>!n.price===null)),this.updateList(o),o}};var Te=[{id:25280736,unq_id:"25280736",ext:"png",animated:!1,average:"#EEEEEE",border:"#EEEEEE",preview:"UklGRjQAAABXRUJQVlA4ICgAAADQAgCdASoeABYAPyWKvFeuKSWjqAgBwCSJaQAAPaOgAP7t6e+boAAA",proportion:71,transparent:0,original_resolution:1,width:700,height:500}],wt=class extends E{constructor(t,e){super(),this.variant=void 0,this.parent=void 0,this.variant=t,this.parent=e}get id(){return this.variant.id}get article(){var t;return(t=this.variant.vendor_code)!=null?t:""}get name(){var t;return((t=this.variant.name)!=null?t:[]).join(" - ")}get images(){var t;return(t=this.variant.images)!=null?t:[]}get oldPrice(){var t;return(t=this.variant.price_old)!=null?t:!1}get hasOldPrice(){return!!(this.parent.isOldPrice&&this.oldPrice)}get visible(){var t;return(t=this.variant.visible)!=null?t:!1}get optionValues(){return this.variant.option_values}get optionsInfo(){return this.variant.optionsInfo}get quantity(){var t;return(t=this.variant.quantity)!=null?t:0}get price(){var t;return(t=this.variant.price)!=null?t:null}get defaultImageId(){var t;return(t=this.variant.default_image_id)!=null?t:0}isDefault(){return!!(this.variant.is_default&&this.variant.visible)}getPrice(t){return typeof t=="string"?flexbe_cli.vars.site.currencyFormat.str.replace(":value",t).replace(":symbol",flexbe_cli.vars.site.currencyData.symbol):t==null?!flexbe_cli.ecommerce.settings.noPriceLabel&&flexbe_cli.is_admin?flexbe_cli.vars.site.language==="ru"?"\u0446\u0435\u043D\u0430 \u0441\u043A\u0440\u044B\u0442\u0430":"price hidden":flexbe_cli.ecommerce.settings.noPriceLabel:flexbe_cli.locale.formatMoney(t,{freeLabel:flexbe_cli.ecommerce.settings.zeroPrice})}getImages(t){if(this.parent.displayImage==="variant"&&this.parent.options.length){let e=this.variant.images;return e.length?e:Te}if(this.parent.displayImage==="product"||!this.parent.options.length){let e=this.parent.images;return t==="image"&&e.length>1?[e.find(o=>o.unq_id===this.defaultImageId)||e[0]]:e.length?e:Te}return Te}getCartData(t){return{price:this.variant.price,title:this.parent.title,productId:this.parent.id,variantId:this.variant.id,vendorCode:this.variant.vendor_code,quantity:this.variant.quantity,img:this.getImages(t),optionsInfo:this.variant.optionsInfo,count:1,strict:1}}availableInfo(){let{inStockStatus:t,outOfStockStatus:e}=flexbe_cli.ecommerce.settings,o=this.quantity!==0;if(flexbe_cli.is_admin&&(t=t==="none"?"in_stock":t,e=e==="none"?"out_of_stock":e),this.parent.allVariantsDisabled)return{text:"Not available",class:"not-available"};if(this.quantity==="dummy")return{text:flexbe_cli.vars.site.language==="ru"?"\u041D\u0430\u043B\u0438\u0447\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430":"Availability",class:"in-stock in_stock"};if(o&&t!=="none")return{text:this.quantity===-1||t==="in_stock"?flexbe_cli.locale.tr("cart::quantity_status::in_stock"):flexbe_cli.locale.tr("cart::quantity_status::items_in_stock",{count:this.quantity}),class:"in-stock in_stock"};if(!o){if(e==="in_stock"&&t!=="none")return{text:flexbe_cli.locale.tr("cart::quantity_status::in_stock"),class:"in-stock in_stock"};if(e==="out_of_stock")return{text:flexbe_cli.locale.tr("cart::quantity_status::out_of_stock"),class:"not-available"};if(e==="preorder")return{text:flexbe_cli.locale.tr("cart::quantity_status::preorder"),class:"preorder"}}return{text:null,class:"hide"}}allowOrder(){let{allowPreorder:t,allowPriceless:e}=flexbe_cli.ecommerce.settings,o=flexbe_cli.locale.tr("ecommerce::option::disabled");return!this.quantity&&!t?{allow:!1,reason:flexbe_cli.locale.tr("ecommerce::option::locked")}:this.parent.allVariantsDisabled?{allow:!1,reason:o}:this.price==null&&!e?{allow:!1,reason:o}:{allow:!0}}};var Ei=(i,t)=>{if(!i.visible)return{exceptionClass:"disabled",tipText:t.needTipsOptions?flexbe_cli.locale.tr("ecommerce::option::disabled"):""};if(!i.quantity){let e=flexbe_cli.ecommerce.settings.outOfStockStatus,o=t.needAvailableOptions?flexbe_cli.locale.tr("cart::quantity_status::in_stock"):"",n=flexbe_cli.ecommerce.settings.allowPreorder,s=n?"":"locked",r=t.needTipsOptions?flexbe_cli.locale.tr("ecommerce::option::locked"):"";return n&&t.needTipsOptions&&(r=e==="in_stock"?o:flexbe_cli.locale.tr("cart::quantity_status::preorder")),n&&e==="none"&&(r=""),{exceptionClass:s,tipText:r}}return t.inStock!=="none"?t.inStock==="items_in_stock"&&i.quantity!==-1?{exceptionClass:"",tipText:t.needAvailableOptions&&t.needTipsOptions?flexbe_cli.locale.tr("cart::quantity_status::items_in_stock",{count:i.quantity}):""}:{exceptionClass:"",tipText:t.needAvailableOptions&&t.needTipsOptions?flexbe_cli.locale.tr("cart::quantity_status::in_stock"):""}:{exceptionClass:"",tipText:""}},rn=(i,t)=>{let e=!1;return i.length!==t.length?!1:(e=i.every(o=>t.some(n=>o.option_id===n.option_id&&o.value_id===n.value_id)),e)},an=({product:i,currentOptions:t,optionsStyle:e})=>{var o,n;let s=(o=e.show_available)!=null?o:!0,r=(n=e.show_in_stock_statuses)!=null?n:!0,a=flexbe_cli.ecommerce.settings.inStockStatus,l=[];return t.length===1?l=i.variants.reduce((u,c)=>[...u,{optionId:`${c.option_values[0].option_id}_${c.option_values[0].value_id}`,...Ei(c,{needTipsOptions:s,needAvailableOptions:r,inStock:a})}],[]):i.variants.forEach(u=>{for(let c=0;c<t.length;c++){let p=t.filter((m,d)=>c!==d),f=u.option_values.filter((m,d)=>c!==d);JSON.stringify(p)===JSON.stringify(f)&&l.push({optionId:`${u.option_values[c].option_id}_${u.option_values[c].value_id}`,...Ei(u,{needTipsOptions:s,needAvailableOptions:r,inStock:a})})}}),l},ln=i=>i.find(t=>t.isDefault())||i.find(t=>t.visible)||i[0],ct=class extends E{constructor(t){super(),this.product=void 0,this.variantItems=void 0,this.activeVariant=void 0,this.activeOptions=void 0,this.oldPayload=void 0,this.hasOptionsElement=void 0,this.product=t,this.variantItems=t.variants.map(e=>new wt(e,this)),this.init()}get id(){return this.product.id}get settings(){var t;return(t=this.product.settings)!=null?t:{}}get link(){if(this.settings.use_custom_uri){var t;return(t=this.settings.uri)!=null?t:""}return""}get variants(){return this.variantItems}get title(){var t;return(t=this.product.name)!=null?t:""}get description(){var t;return(t=this.product.description)!=null?t:""}get options(){var t;return(t=this.product.options)!=null?t:[]}get hasVariants(){return this.variants.length>1}get allVariantsDisabled(){return!this.variants.filter(t=>t.visible).length}get displayImage(){var t;return(t=this.product.displayImage)!=null?t:"product"}get images(){var t;return(t=this.product.images)!=null?t:[]}get isOldPrice(){var t;return(t=this.product.usePriceOld)!=null?t:!1}get hasOptions(){return!!this.product.options.length}get visible(){return!!this.product.visible}init(){let t=ln(this.variantItems),e=t.optionValues;this.setOption(e),this.setVariant(t)}getAction(t){return this.hasVariants&&!t&&!this.hasOptionsElement?"modal":"cart"}getVariant(t){var e;return(e=this.variantItems.filter(o=>String(o.id)===String(t))[0])!=null?e:this.variantItems[0]}currentVariant(t){return t==="default"?this.activeVariant:this.getVariant(t)}currentOptions(t){return t&&t!=="default"?this.getVariant(t).optionValues:this.activeOptions}selectOption(t){let[e,o]=t.split("_"),n=this.currentOptions().map(r=>String(r.option_id)===String(e)?{option_id:+e,value_id:+o}:r),s=this.variantItems.find(r=>rn(r.optionValues,n));this.setOption(n),this.setVariant(s),t!==this.oldPayload&&(flexbe_cli.events.trigger(`update_${this.product.id}`,this),this.oldPayload=t)}setOption(t){this.activeOptions=t}setVariant(t){this.activeVariant=t}setOptionElement(){this.hasOptionsElement||(this.hasOptionsElement=!0,flexbe_cli.events.trigger(`update_${this.product.id}`,this))}combinationOptionsList(t){return an({product:this.product,currentOptions:this.activeOptions,optionsStyle:t})}};var xt=class extends E{constructor(){super(),this.products=void 0,this.products=new Map,this.init()}init(){let t=document.getElementById("flexbe-products-store");if(t){try{let e=JSON.parse(t.textContent.replaceAll("&quot;",'"').replaceAll("&#039;","'").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"));this.addToStore(e)}catch{}t.parentNode.removeChild(t)}}addToStore(t){t.forEach(e=>{(e.visible||flexbe_cli.is_admin)&&this.products.set(String(e.id),new ct(e))})}getProducts(t){return t.map(e=>this.products.get(String(e))).filter(Boolean)}getProduct(t){return this.products.get(String(t))}getDummyProduct(){let t=flexbe_cli.vars.site.language==="ru";return new ct({id:0,name:t?"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430":"Product name",description:t?"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430 \u0434\u043E\u043B\u0436\u043D\u043E \u043E\u0442\u0440\u0430\u0436\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u0438 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B, \u0432\u0430\u0436\u043D\u044B\u0435 \u043F\u0440\u0438 \u043F\u043E\u043A\u0443\u043F\u043A\u0435.":"The product description should convey the key features and qualities that help customers make a purchasing decision.",images:t?[{id:39821031,ext:"jpg",animated:!1,average:"#EEEEEE",border:"#EEEEEE",height:2480,preview:"UklGRkYAAABXRUJQVlA4IDoAAAAQBACdASoeACMAPxV8r1GxKKQitVv4AiAiiWkAAHdYxpA7nUpHNdVoAAD+7mmMq9LCAW+j7lgJyYAA",proportion:114.81,transparent:0,width:2160}]:[{animated:!1,average:"#EEEEEE",border:"#EEEEEE",ext:"jpg",height:1080,id:39909534,preview:"UklGRkwAAABXRUJQVlA4IEAAAADwAwCdASoeAB4APyVyyWSuJKkpFAHAJIlpAAA9ZIprB9gU3U+hJ/oAAP7tQ+5GIEcJuzeAREpLgMJmahfgAAAA",proportion:100,transparent:0,width:1080}],variants:[{id:6468,name:t?["\u0412\u0430\u0440\u0438\u0430\u043D\u0442 1"]:["Variant 1"],option_values:[{option_id:893,value_id:2338}],vendor_code:t?"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u043A\u0443\u043B\u0430":"SKU number",quantity:"dummy",price:t?"\u0426\u0435\u043D\u0430":"Price",price_old:t?"\u0421\u0442\u0430\u0440\u0430\u044F \u0446\u0435\u043D\u0430":"Old price",images:[],default_image_id:null,visible:1,is_default:1},{id:6480,name:t?["\u0412\u0430\u0440\u0438\u0430\u043D\u0442 2"]:["Variant 2"],option_values:[{option_id:893,value_id:2339}],vendor_code:t?"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u043A\u0443\u043B\u0430":"SKU number",quantity:"dummy",price:t?"\u0426\u0435\u043D\u0430":"Price",price_old:t?"\u0421\u0442\u0430\u0440\u0430\u044F \u0446\u0435\u043D\u0430":"Old price",images:[],default_image_id:null,visible:1,is_default:0},{id:6481,name:t?["\u0412\u0430\u0440\u0438\u0430\u043D\u0442 3"]:["Variant 3"],option_values:[{option_id:893,value_id:2340}],vendor_code:t?"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0440\u0442\u0438\u043A\u0443\u043B\u0430":"SKU number",quantity:"dummy",price:t?"\u0426\u0435\u043D\u0430":"Price",price_old:t?"\u0421\u0442\u0430\u0440\u0430\u044F \u0446\u0435\u043D\u0430":"Old price",images:[],default_image_id:null,visible:1,is_default:0}],options:[{id:893,name:t?"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043E\u043F\u0446\u0438\u0438":"Option name",sort_index:0,values:[{id:2338,name:t?"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 1":"Variant 1",data:{color:"#ffffff",contrast:"dark",contrastFixed:"dark"}},{id:2339,name:t?"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 2":"Variant 2",data:{color:"#000000",contrast:"light",contrastFixed:"light"}},{id:2340,name:t?"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 3":"Variant 3",data:{color:"#7666F6",contrast:"dark",contrastFixed:"dark"}}],data:{type:"color",widget_type:"radio"}}],visible:!0,usePriceOld:!0,displayImage:"product",available:!0})}async loadProducts({showType:t,productIds:e,categoryIds:o,limit:n,onlyVisible:s,hideOutOfStock:r}){let a={project_id:flexbe_cli.vars.site.id,productIds:t==="select_products"?e:void 0,categoryIds:t==="select_category"?o:void 0,showType:t,limit:n,onlyVisible:s??!0,hideOutOfStock:r??flexbe_cli.vars.site.ecommerce.hideOutOfStock},{products:l,categories:u}=await new Promise((c,p)=>{let f=d=>{c(d)},m=d=>{p(d)};return $.ajax({url:"/api/ecommerce/data/",type:"GET",dataType:"json",data:a}).done(f).fail(m)});return this.addToStore(l),{categories:u,products:l}}};var At=class extends E{get hasPromotionChanges(){var t,e;return!!((t=this.promotionsChanges)!=null&&t.discount)||!!((e=this.promotionsChanges)!=null&&e.promocode)}get groupId(){return typeof flexbe_cli=="object"?flexbe_cli.group_id:null}get timezone(){return typeof flexbe_cli=="object"?flexbe_cli.vars.site.timezone:null}constructor(t){super(),this.options=void 0,this.discounts=void 0,this.promocode=void 0,this.activeDiscount=void 0,this.nearestDiscount=void 0,this.appliedPromocode=void 0,this.promotionsChanges=void 0,this.getTotal=void 0,this.getTotalIncludingPromotions=void 0,this.options=t,this.appliedPromocode=null,this.activeDiscount=null,this.nearestDiscount=null,this.promotionsChanges={},this.getTotal=()=>(t.getTotal==null?void 0:t.getTotal())||0,this.getTotalIncludingPromotions=()=>{var e,o;let n=this.getTotal(),s=((e=this.activeDiscount)==null?void 0:e.discountValue)||0,r=((o=this.appliedPromocode)==null?void 0:o.discountValue)||0;return n-s-r},flexbe_cli.is_admin||this.init(t)}init(t){var e;this.updateDiscountList((e=flexbe_cli.vars.site.discounts)!=null?e:[],{updateChanges:!1}),t.needUpdateWithLS&&this.updateFromLocalStorage(),this.updateActiveDiscount(!1),this.updateNearestDiscount(),this.bindEvents()}async dispatch(t,...e){let o=this[t];if(typeof o!="function")throw new Error(`Promotion dispatch: action '${t}' doesnt exist`);let n=await o.apply(this,e);this.trigger("dispatch",{name:t,args:e,result:n})}bindEvents(){this.on("dispatch.promotion-store",({name:t})=>{["applyPromocode","removePromocode"].includes(t)&&(this.updateActiveDiscount(),this.updateNearestDiscount())})}updateActiveDiscount(t=!1){var e;if(!this.discounts.length||this.appliedPromocode&&!this.appliedPromocode.usage_with_any_discount){this.activeDiscount=null;return}let o=this.discounts.filter(l=>l.isAvailableByTime),n=this.getTotal(),s=o.filter(l=>n>=l.active_from&&n-l.discountValue>=0).sort((l,u)=>u.discountValue-l.discountValue)[0]||null,r=this.activeDiscount,a=s?this.getDiscountData(s.id):null;t&&s?.discountValue!==((e=this.activeDiscount)==null?void 0:e.discountValue)&&(this.promotionsChanges.discount={oldData:r,newData:a}),this.activeDiscount=a}updateNearestDiscount(){var t;let e=this.getTotal(),o=this.getTotalIncludingPromotions();if(!this.discounts.length||this.appliedPromocode&&!this.appliedPromocode.usage_with_any_discount||o<=0){this.nearestDiscount=null;return}let n=this.discounts.filter(r=>r.isAvailableByTime),s=(t=n.filter(r=>r.active_from>e).filter(r=>{if(this.activeDiscount){if(r.discount_type==="percent"){let a=r.active_from*r.discount_amount;return this.activeDiscount.discount_type==="percent"?a>r.active_from*this.activeDiscount.discount_amount:a>this.activeDiscount.discount_amount}return+r.discount_amount>this.activeDiscount.discountValue}return!0}).sort((r,a)=>r.discountValue-a.discountValue).sort((r,a)=>r.active_from-a.active_from)[0])==null?void 0:t.active_from;if(s){let r=n.filter(a=>a.active_from===s).filter(a=>{var l;return!this.activeDiscount||a.discountValue>((l=this.activeDiscount)==null?void 0:l.discountValue)}).sort((a,l)=>l.discountValue-a.discountValue)[0]||{};this.nearestDiscount=r?this.getDiscountData(r.id):null}else this.nearestDiscount=null}updateAppliedPromocode(){var t;if(!this.appliedPromocode)return;let e=((t=this.promotionsChanges)==null||(t=t.promocode)==null?void 0:t.oldData)||this.appliedPromocode,o=this.getPromocodeData();if(e&&o){if(e.discountValue!==o?.discountValue||e.delivery_free!==o?.delivery_free){var n;this.promotionsChanges.promocode={oldData:((n=this.promotionsChanges)==null||(n=n.promocode)==null?void 0:n.oldData)||this.appliedPromocode,newData:o,code:this.appliedPromocode.code}}else this.acceptPromotionChanges({promocode:!0});this.appliedPromocode=this.promocode}}async applyPromocode(t){let e=this.getTotal(),o;try{o=await this.loadDataPromocode(t)}catch{let s=Error();throw s.name="default_error",s}if(this.updatePromocode(o,{updatePromotions:!1}),e&&this.promocode.active_from&&this.promocode.active_from>e){let n=new Error(this.promocode.active_from.toString());throw n.name="total_error",n}if(!this.promocode.isAvailableByTime){let n=new Error;throw n.name="timeout_error",n}if(this.appliedPromocode=o,this.options.needUpdateWithLS)try{localStorage.setItem("f_applied_promocode",JSON.stringify({code:t,id:this.promocode.id}))}catch{}}removePromocode(){this.appliedPromocode=null,this.acceptPromotionChanges({promocode:!0});try{localStorage.removeItem("f_applied_promocode")}catch{}}acceptPromotionChanges({promocode:t,discount:e}={}){t||e?(t&&delete this.promotionsChanges.promocode,e&&delete this.promotionsChanges.discount):this.promotionsChanges={}}async updateFromLocalStorage(){let t=JSON.parse(localStorage.getItem("f_applied_promocode"));if(t&&t.id&&t.code){var e;let o;try{o=await this.loadDataPromocode(t.code)}catch{this.removePromocode();return}if(this.updatePromocode(o,{updatePromotions:!1}),!((e=this.promocode)!=null&&e.isActive)){this.removePromocode();return}this.appliedPromocode=this.promocode}}getDiscountData(t){return this.discounts.find(e=>e.id===t)}getPromocodeData(){return this.promocode}async loadPromotionList(t){return new Promise((e,o)=>{let n=r=>{e(r)},s=r=>{o(r)};return $.ajax({url:"/api/promotions/get_list/",type:"GET",dataType:"json",data:{project_id:flexbe_cli.vars.site.id,promotionType:t}}).done(n).fail(s)})}async loadDataPromocode(t){return new Promise((e,o)=>{let n=r=>{e(r)},s=r=>{o(r)};return $.ajax({url:"/api/promotions/get_promocode/",type:"GET",dataType:"json",data:{project_id:flexbe_cli.vars.site.id,promoCode:t}}).done(n).fail(s)})}updatePromocode(t,{updatePromotions:e=!0}={}){typeof t=="object"&&Object.defineProperties(t,{isAvailableByTime:{get:()=>{let{date_from:o,date_to:n}=t;return Ie({dateFrom:o,dateTo:n,timezone:this.timezone})}},discountValue:{get:()=>{let o=this.getTotal();return t&&t.discount_type==="percent"?Math.round(o*t.discount_amount)/100:+t.discount_amount}},isAvailable:{get:()=>!!this.promocode&&t.isAvailableByTime},isActive:{get:()=>{if(!t.isAvailable)return!1;let o=this.getTotal();return t?.active_from<=o}},hasFreeDelivery:{get:()=>t?.delivery_free||t?.discount_type==="delivery"}}),this.promocode=t,e&&this.updateAppliedPromocode()}updateDiscountList(t,{updateChanges:e=!0,updatePromotions:o=!0}={}){t.forEach(n=>{Object.defineProperties(n,{isAvailableByTime:{get:()=>{let{date_from:s,date_to:r}=n;return Ie({dateFrom:s,dateTo:r,timezone:this.timezone})}},discountValue:{get:()=>{let s=this.getTotal();return n&&n.discount_type==="percent"?Math.round(s*n.discount_amount)/100:+n.discount_amount}}})}),this.discounts=t,o&&(this.updateActiveDiscount(e),this.updateNearestDiscount())}async loadDiscountList({updateChanges:t=!0,updatePromotions:e=!0}={}){let o;try{o=await this.loadPromotionList("discount")}catch{this.discounts=[];return}this.updateDiscountList(o,{updateChanges:t,updatePromotions:e})}};var Si="f_last_shipping_type",$t=class extends E{get methods(){return Object.values(this.lists).flat()}get enabled(){return this.methods.length>0}constructor(){super(),this.activeType=void 0,this.activeAddress={country:"",addressLine1:"",addressLine2:"",city:"",region:"",zipCode:""},this.lists={delivery:[],pickup:[]},this.activeMethod=void 0,this.ecommerceSetting=void 0,this.lists={delivery:(flexbe_cli.vars.site.delivery||[]).filter(t=>t.enabled),pickup:(flexbe_cli.vars.site.pickups||[]).filter(t=>t.enabled)},this.ecommerceSetting=q.settings,this.dispatch("selectType",localStorage.getItem(Si)||"delivery")}dispatch(t,...e){let o=this[t];if(typeof o!="function")throw new Error(`Shipping dispatch: action '${t}' doesnt exist`);let n=o.apply(this,e);this.trigger("dispatch",{name:t,args:e,result:n})}getList(t=this.activeType){return this.lists[t]||[]}getActive(){let t=this.activeMethod;if(!t)return null;let e=this.getShippingType(t),o={id:t.id,type:this.getShippingType(t),title:t.title,desc:t.desc,price:this.getPrice(t.id),fieldIds:t.fields.map(n=>n.id),address:null};return e==="pickup"?o.address=t.address:t.deliveryAddressEnabled&&(o.address=this.activeAddress),o}getMethod(t){return this.methods.find(e=>e.id.toString()===t)}getShippingType(t){if(!t)return null;let e=typeof t=="string"?t:t.id;for(let[o,n]of Object.entries(this.lists))if(n.some(s=>s.id.toString()===e.toString()))return o;return null}setAddress(t){this.activeAddress={...this.activeAddress,...t}}syncFromLS(){let t=`f_last_${this.activeType}`,e=localStorage.getItem(t);this.getMethod(e)||localStorage.removeItem(t),this.dispatch("selectMethod",e)}selectType(t){var e;t=(e=this.lists[t])!=null&&e.length?t:Object.keys(this.lists).find(o=>this.lists[o].length),t&&(this.activeType=t,localStorage.setItem(Si,this.activeType),this.syncFromLS())}selectMethod(t){if(this.activeMethod=this.getMethod(t)||this.getList()[0],this.activeMethod){let e=this.getShippingType(this.activeMethod);localStorage.setItem(`f_last_${e}`,this.activeMethod.id),this.activeType!==e&&this.dispatch("selectType",e)}return this.activeMethod}getPrice(t){let{appliedPromocode:e}=q.promotionStore||{},o=t?this.getMethod(t):this.activeMethod,n=+this.ecommerceSetting.minTotalOrder,s=0,r="\u23E4",a=0,l="",u=0,c="",p=0,f="",m=0,d="",h=!1,g;if(o){let b=q.cartStore.getTotal(),_=e?.hasFreeShipping&&e?.isActive;o.prices.filter(y=>y.from!=="").forEach((y,j)=>{o.useMinTotal&&!j&&+y.from&&(s=+y.price,+y.from>n&&(p=+y.from)),(b>=+y.from||!j)&&(s=+y.price),_&&(s=0)});let w=o.prices.find(y=>y.price===0);h=!!o.useNotFixTotal,g=h&&(!w||w.from===""),w&&(a=+w.from||0,u=Math.max(0,a-b),l=M.formatMoney(a),c=M.formatMoney(u)),p&&(m=Math.max(0,p-b),f=M.formatMoney(p),d=M.formatMoney(m))}return(!h||a&&u<=0)&&(h=!1,r=M.formatMoney(s,{freeLabel:!0})),{current:s,currentFormatted:r,freeFrom:a,freeFromFormatted:l,untilFree:u,untilFreeFormatted:c,minTotal:p,minTotalFormatted:f,untilMinTotal:m,untilMinTotalFormatted:d,notFixedPrice:h,notHasFree:g}}};var Ce=class{constructor(){this.cartStore=null,this.shippingStore=null,this.promotionStore=null,this.productsStore=null,this.getProductInfo=Ai}get settings(){return flexbe_cli.vars.site.ecommerce}init({enableDelivery:t=!1,enablePromotions:e=!1,enableProducts:o=!1}){this.cartStore=new yt,e&&(this.promotionStore=new At({getTotal:this.cartStore.getTotal,needUpdateWithLS:!flexbe_cli.is_admin})),t&&(this.shippingStore=new $t),o&&(this.productsStore=new xt)}},q=new Ce;var Et=class{static create(){return new this}constructor(){this.Interactivity=void 0,this.animationsData=[],this.interactionInstances=[],this.responsiveMode=flexbe_cli.resize.responsiveMode,this.observableLoopSliderElements=[],this.observableTabs=[],this.slidersEventsMap=new Map,this.init()}async init(){this.findAnimations(),this.animationsData.length&&await this.createAnimations(),this.bindEvents()}bindEvents(){window.addEventListener("resized",()=>{let t=flexbe_cli.resize.responsiveMode;t!==this.responsiveMode&&(this.responsiveMode=t,this.updateAnimations())}),flexbe_cli.is_admin&&flexbe_cli.events.off("hideShowUI.global-animation-component").on("hideShowUI.global-animation-component",t=>{t==="preview"?(this.findAnimations(),this.createAnimations()):this.destroyAnimations()})}findAnimations(){this.animationsData=[],$("[data-flexbe-animations]").each((t,e)=>{let o=JSON.parse(e.getAttribute("data-flexbe-animations"));o.forEach(n=>{n.element=e}),o&&o.length&&this.animationsData.push(...o),e.animationsOptions=o,e.removeAttribute("data-flexbe-animations")})}async require(){this.Interactivity||(this.Interactivity=(await import("../../js/chunk-LSIHXEER.mjs")).default)}async createAnimation(t){var e;let o=t==null||(e=t.responsive)==null?void 0:e[this.responsiveMode];if(o)if(o.enabled){var n;let s=(t==null||(n=t.responsive)==null?void 0:n[o.inherit])||o,r=t.element.closest(".swiper-slide"),a=t.element.closest(".wait-animation"),l=t.element.parentNode.closest(".has-animation"),u=t.element.closest(".animation--slide_up"),c=s.interactionType==="scroll"&&s.interactionSettings.fixed;u&&c&&flexbe_cli.transitions.stopTransition(a);let f=await this.Interactivity.create({id:t.id,element:t.element,allowNativePositionFixed:!r&&!l,normalizeIntersectionState:(m,d)=>{if(d.interactionType==="screen"){let b=d.interactionSettings.triggerElements[0],_=b.closest(".swiper-slide"),w=b.closest(".tab-content");if(_||w){let y=!0;if(w&&(y=y&&w.classList.contains("active")),_){var h,g;let j=_.getAttribute("data-item-id"),D=_.closest(".swiper"),Z=(h=D==null||(g=D.swiper)==null?void 0:g.slides)!=null?h:[],x=[_,...Z.filter(tt=>tt.getAttribute("data-item-id")===j)];y=y&&x.some(tt=>tt.classList.contains("swiper-slide-visible"))}return y&&m==="in"?"in":"out"}}return m},...s,normalizeOptions:m=>({...m,steps:m.steps.map(d=>{let h={...d};return d.animationParams.skewEnabled||(delete h.animationParams.skewX,delete h.animationParams.skewY),d.animationParams.clipPathEnabled||delete h.animationParams.clipPath,h})})});f.setProgress(0,!1),this.interactionInstances.push(f),this.walkTriggerElements({interaction:f}),$(a).off("flexbe-transition-end").one("flexbe-transition-end",async()=>{f.updateOffsetBound()})}else this.Interactivity.removeAnimationStyles(t.element)}async createAnimations(){flexbe_cli.run.is_preview&&(await this.require(),this.animationsData.forEach(t=>this.createAnimation(t)))}walkTriggerElements({interaction:t}){t.interactionSettings.triggerElements.forEach(e=>{let o=e.closest(".swiper"),n=e.closest(".tab-content");o&&(o.swiper?this.sliderNormalizationsInit({swiper:o.swiper,triggerElement:e,interaction:t}):o.addEventListener("swiper:init",()=>{setTimeout(()=>{this.sliderNormalizationsInit({swiper:o.swiper,triggerElement:e,interaction:t})},50)})),n&&this.tabNormalizationsInit({tabEl:n,interaction:t})})}bindSliderEvents(t,e){this.slidersEventsMap.get(t)||this.slidersEventsMap.set(t,{});let o=this.slidersEventsMap.get(t);Object.entries(e).forEach(([n,s])=>{o[n]||(o[n]=[],t.on(n,r=>{o[n].forEach(l=>l(r))})),o[n].push(s)})}sliderNormalizationsInit({swiper:t,triggerElement:e,interaction:o}){if(!t||!o)return;let n=e.classList.contains("swiper-slide"),s=e.closest(".swiper-slide");if(o.interactionType==="screen"&&s&&(this.bindSliderEvents(t,{slideChange:()=>{requestAnimationFrame(()=>{this.Interactivity.checkIntersection(o)})}}),this.Interactivity.checkIntersection(o)),n&&(o.updateStyles(),this.bindSliderEvents(t,{setTranslate:()=>{requestAnimationFrame(()=>{o.updateStyles()})},update:()=>o.updateStyles()})),t.params.loop){if(this.observableLoopSliderElements.includes(t.el))return;this.observableLoopSliderElements.push(t.el);let r=Array.from(t.slides||[]);r.filter(l=>l.classList.contains("swiper-slide-duplicate")).forEach(l=>{let u=l.getAttribute("data-item-id"),c=r.find(f=>f.getAttribute("data-item-id")===u&&!f.hasAttribute("data-cloned")),p=Array.from(l.querySelectorAll(".has-animation"));c.animationsOptions&&this.createAnimation({...c.animationsOptions[0],element:l}),p.forEach(f=>{var m;let d=f.getAttribute("data-id")||((m=f.closest("[data-id]"))==null?void 0:m.getAttribute("data-id")),h=c.querySelector(`[data-id="${d}"].has-animation, [data-id="${d}"] .has-animation`);h&&h.animationsOptions&&this.createAnimation({...h.animationsOptions[0],element:f})})})}}tabNormalizationsInit({tabEl:t,interaction:e}){this.observableTabs.includes(t)||(this.observableTabs.push(t),t.addEventListener("element-become-visible",()=>this.Interactivity.checkIntersection(e)),t.addEventListener("element-become-hidden",()=>this.Interactivity.checkIntersection(e)))}async updateAnimations(){flexbe_cli.run.is_preview&&(this.destroyAnimations(),await this.createAnimations())}destroyAnimations(){this.interactionInstances.forEach(t=>{var e;return(e=this.Interactivity)==null?void 0:e.remove(t)}),this.interactionInstances=[]}};var cn=".autowidth-desktop:not(.autoheight-desktop) > .element-content, .autowidth-mobile:not(.autoheight-mobile) > .element-content",ki="--elementHeightPx",ut=class i{static create(){return new this}constructor(){flexbe_cli.is_admin&&flexbe_cli.events.off("entity_render:template.autoWidth").on("entity_render:template.autoWidth",e=>{if(!e||!e.id)return;let o=document.querySelector(`[data-id="${e.id}"]`);this.observeInArea(o)});let t=e=>{let o=e._core;if(o&&o.inScreen)this.observeInArea(o.area);else{let n=new AbortController;e.addEventListener("screen",s=>{let r=s.detail||{};r.state&&r.first&&(this.observeInArea(s.target),n.abort())},{signal:n.signal})}};k(()=>document.querySelectorAll(".b_block").forEach(e=>t(e))),k(()=>document.querySelectorAll(".m_modal").forEach(e=>t(e))),k(()=>document.querySelectorAll(".w_widget").forEach(e=>t(e)))}observeInArea(t=document){let e=t?.querySelectorAll(cn)||[];Array.from(e).forEach(o=>i.observer.observe(o))}};ut.observer=new ResizeObserver(i=>{i.forEach(({target:t,contentRect:e})=>{let o=t&&t.offsetParent;if(!o)return;let n=getComputedStyle(o),s=`${e.height}px`;n.getPropertyValue(ki)!==s&&requestAnimationFrame(()=>{o.style.setProperty(ki,s)})})});var Ci,un=150,dn=2160,fn=Math.min(2,window.devicePixelRatio),F=class{static create(){return new this}constructor(){this.imageOptions={lazy:!0,lazy_priority:!1,...flexbe_cli.vars.site.images||{}},this.loadInArea(document,"inline"),this.initLazyLoading(),this.initLazyPriority()}initLazyLoading(){flexbe_cli.is_admin&&flexbe_cli.events.off("entity_render:template.lazyLoading").on("entity_render:template.lazyLoading",e=>{if(!e||!e.id)return;let o=document.querySelector(`[data-id="${e.id}"]`);this.loadInArea(o,"inline"),this.loadInArea(o,"lazy")});let t=e=>{let o=e._core;if(o&&o.inScreen)this.loadInArea(o.area,"lazy");else{let n=new AbortController;e.addEventListener("screen",s=>{let r=s.detail||{};r.state&&r.first&&(this.loadInArea(s.target,"lazy"),n.abort())},{signal:n.signal})}};k(()=>document.querySelectorAll(".b_block").forEach(e=>t(e))),k(()=>document.querySelectorAll(".m_modal").forEach(e=>t(e))),k(()=>document.querySelectorAll(".w_widget").forEach(e=>t(e)))}initLazyPriority(){let t=this.imageOptions.lazy,e=this.imageOptions.lazy_priority;!t||!e||$(window).one("load.lazyPriority",()=>{let o=[".component-bg",'.bg-fill[data-type="image"]',".component-image",".component-icon"].join(",");this.loadInArea(document,"lazy"),Array.from(document.querySelectorAll(o)).forEach(n=>n.dispatchEvent(new CustomEvent("setImage",{detail:{reason:"lazyPriority"}})))})}loadInArea(t=document,e="inline"){if(!t)return;let o=Array.from(t.querySelectorAll(`[data-${e}-src], [data-${e}-bg], [data-${e}-href]`));pn(o)}};Ci=F;F.observer=new ResizeObserver(i=>{i.filter(e=>e.contentRect.width||e.contentRect.height).forEach(e=>{Pi(e.target),Ci.observer.unobserve(e.target)})});function pn(i){i.length&&i.forEach(t=>{if(t.tagName==="LINK"||t.tagName==="SCRIPT"){Pi(t);return}if(t.tagName==="svg"||t.tagName==="use"){var e;t=(e=t.closest("svg"))==null?void 0:e.parentElement}F.observer.observe(t)})}function Pi(i){let t=i.dataset.inlineSrc||i.dataset.lazySrc,e=i.dataset.inlineBg||i.dataset.lazyBg,o=i.dataset.inlineHref||i.dataset.lazyHref,n=t||e||o,s=i.tagName==="svg"?[i]:[...i.children].filter(d=>d.tagName==="svg");if(s.length){let d=s[0].querySelector("use"),h=d&&(d.dataset.inlineHref||d.dataset.lazyHref);return h&&Ti(d,h),!0}if(i.tagName==="LINK")return Ti(i,n),!0;if(i.tagName==="SCRIPT")return Pe(i,n),!0;if(!n)return!0;if(!/%optimalWidth%/gi.test(n))return e?Ii(i,n):Pe(i,n),F.observer.unobserve(i),!0;let r=i.parentElement,a=r.dataset.imgAttachment==="fixed",l=i.dataset.imgProportion||100,u=a?window.innerWidth:r.offsetWidth,c=a?window.innerHeight:r.offsetHeight;if(!u&&!c)return!1;let p=l/100,f=t?p:c/u,m;return f<=p?m=u:m=c/p,m=Math.max(un,Math.min(m*fn,dn)),m=Math.round(m),e?Ii(i,n.replace(/%optimalWidth%/gi,`${m}`)):Pe(i,n.replace(/%optimalWidth%/gi,`${m}`)),F.observer.unobserve(i),!0}function Ii(i,t){let e=i.parentElement.querySelector("img"),o=getComputedStyle(i).getPropertyValue("background-image");i.style.backgroundImage=[`url(${t})`,o].filter(n=>n).join(","),e&&e.setAttribute("src",t),["data-inline-bg","data-lazy-bg"].forEach(n=>i.removeAttribute(n))}function Pe(i,t){i.setAttribute("src",t),["data-inline-src","data-lazy-src"].forEach(e=>i.removeAttribute(e))}function Ti(i,t){i.setAttribute("href",t),["data-inline-href","data-lazy-href"].forEach(e=>i.removeAttribute(e))}var Oi,Oe={x:0,y:0},Mi=".lightbox-container, .b_block, .m_modal, .w_widget",St="[data-lightbox]",kt=class{static create(){return new this}constructor(){var t;this.loaded=!1,this.opened=!1,this.$lg=void 0,this.bindEvents(),(t=window.history.state)!=null&&t.lg&&this.openGallery(window.history.state.lg)}require(t){if(this.loaded){typeof t=="function"&&t();return}flexbe_cli.require(["/_s/lib/jquery/lightGallery/css/lightgallery.min.css","/_s/lib/jquery/lightGallery/js/lightgallery.min.js"],()=>{this.loaded=!0,typeof t=="function"&&t()})}bindEvents(){$(window).one("load.lightbox",()=>{$(St).length&&this.require()}),$(document).on("click.lightbox",St,t=>{t.preventDefault(),t.stopPropagation()}),$(document).on("pointerdown.lightbox",St,t=>{var e,o;flexbe_cli.run.is_preview&&(t.preventDefault(),t.stopPropagation(),Oi=t.target,Oe={x:(e=t.clientX)!=null?e:t.touches[0].clientX,y:(o=t.clientY)!=null?o:t.touches[0].clientY})}),$(document).on("pointerup.lightbox",St,t=>{var e,o;let n=Oi===t.target,s={x:(e=t.clientX)!=null?e:t.changedTouches[0].clientX,y:(o=t.clientY)!=null?o:t.changedTouches[0].clientY},r=Math.sqrt((Oe.x-s.x)**2+(Oe.y-s.y)**2)<5;if(!n||!r||t.button!==0)return;let a=$(t.currentTarget),l=a.closest(Mi),u=a.attr("data-lightbox"),c=a.closest("[data-loop]").attr("data-loop")==="1",f=l.find(St).filter((d,h)=>{let g=$(h).closest(Mi),b=g.is(l),_=g.closest(".swiper-slide-duplicate").length;return b&&!_}).toArray().map(d=>{let h,g=$(d),b=g.attr("data-lightbox")||g.attr("src")||g.attr("href"),_=g.attr("data-sub-html");return _?h=g.find(_).html():h=g.attr("alt")||g.find("img").attr("alt")||"",c&&g.closest("[data-cloned]").length?null:{src:b,subHtml:h}}).filter(d=>d?.src),m=f.findIndex(d=>d.src===u)||0;this.openGallery({index:m,dynamicEl:f,enableSlide:f.length>1,loop:c})}),$(window).on("popstate.lightbox",()=>{let t=window.history.state||{};t.lg?this.openGallery(t.lg):this.closeGallery()})}openGallery(t={}){if(t.dynamicEl.length===0||this.opened)return;this.opened=!0,this.$lg=$("<div/>");let e=this.$lg,o={index:0,dynamicEl:[],dynamic:!0,subHtmlSelectorRelative:!0,getCaptionFromTitleOrAlt:!0,slideEndAnimation:!1,swipeThreshold:30,counter:!0,closable:!0,download:!1,easing:"ease-out",hideBarsDelay:1e3,zoomIcons:!1,actualSize:!1,enableSlide:!0,loop:!0,...t};o.index<=0&&(o.index=0),e.on("onBeforeOpen.lg",()=>{this.opened=!0,Li(o)}),e.on("onBeforeSlide.lg",(n,s,r)=>{s!==r&&Li({...o,index:r})}),e.on("onBeforeClose.lg",()=>{var n;(n=window.history.state)!=null&&n.lg&&(flexbe_cli.lockPopstate=!0,window.history.back(),setTimeout(()=>{flexbe_cli.lockPopstate=!1},20)),this.opened=!1}),this.require(()=>e.lightGallery(o))}closeGallery(){var t;this.opened=!1;let e=(t=this.$lg)==null?void 0:t.data("lightGallery");e&&e.destroy()}};function Li(i){let t=window.history.state||{};flexbe_cli.lockPopstate=!0,t.lg?window.history.replaceState({lg:i},null,"#image-popup"):window.history.pushState({lg:i},null,"#image-popup"),flexbe_cli.lockPopstate=!1}var Me=document,It="a[href], [data-action]",Rt="[data-action-target]",zt,Fi,Tt=class i{static create(){return zt||(zt=new i,zt)}constructor(){this.bindEvents()}bindEvents(){let t=e=>!!e.target.closest('[data-prevent-action], [data-flexbe-events="off"]');$(Me).off("mousedown.component-links-fake",Rt).on("mousedown.component-links-fake",Rt,e=>e.which===2||e.button===1?(e.preventDefault(),!1):!0),$(Me).off("click.component-links-fake auxclick.component-links-fake").on("click.component-links-fake auxclick.component-links-fake",Rt,e=>{let o=e.originalEvent;return!o||!o.isTrusted||e.target.closest(It)||t(e)?!0:(e.stopPropagation(),e.stopImmediatePropagation(),ke($(e.currentTarget).children(It).get(0),o),!1)}),$(Me).off("click.component-links auxclick.component-links",It).on("click.component-links auxclick.component-links",It,e=>{let o=e.currentTarget,n=$(o);if(t(e))return!0;if(!flexbe_cli.run.is_preview&&!o.closest(".editor-focus, .b_block--global, .component-menu-dropdown"))return e.preventDefault(),!0;let s=n.closest("[data-action]").data("action")||(o.tagName==="A"?"link":"none");if(this.reachGoals(e),["link","app_link","phone","mail","anchor"].includes(s))return this.actionLink(e);if(s==="file")return this.actionFile();if(s==="button")return this.actionButton(e);if(s==="modalOptions")return this.openProductOptions(e);if(s.startsWith("modal"))return this.actionModal(e);if(s==="cart")return this.actionCart(e);if(s==="quiz")return this.actionQuiz(e);if(s==="close")return this.actionClose(e);if(s==="code")return this.actionCode(e);if(s==="popup")return e.preventDefault(),!1;s==="a11y"&&flexbe_cli.events.trigger("ui_mobilemenu_close"),s==="copy"&&this.actionCopy(e)})}openProductOptions(t){t.preventDefault(),t.stopPropagation();let e=t.currentTarget.dataset.productId;if(!e||!flexbe_cli.run.is_preview)return;let[o]=flexbe_cli.ecommerce.productsStore.getProducts([e]);o&&setTimeout(()=>{flexbe_cli.events.trigger("ui_modal_open",{id:"product-options",data:{product:o},options:{hash:!1,rise:!0}})},100)}actionCode(t){if(!flexbe_cli.run.is_preview)return;let e=t.currentTarget,o=async function(){}.constructor;return new o("event",e.getAttribute("data-code")||"")(t.originalEvent)}actionFile(){return!0}actionLink(t){let e=t.currentTarget,n=e.hasAttribute("href")?e.getAttribute("href"):"",s=t.button===2||t.which===3,r=t.button===1||t.which===2,a=t.metaKey||t.ctrlKey||r||e.getAttribute("target")==="_blank"||!1,l=e.hasAttribute("download"),u=flexbe_cli.is_admin;s||l||a&&!r&&!u||(t.preventDefault(),clearTimeout(Fi),Fi=setTimeout(()=>{flexbe_cli.helpers.gotoLink(n,a)},15))}actionCopy(t){let e=t.currentTarget,o=e.getAttribute("href");o&&(o=new URL(o,location.href).toString());let n=e.getAttribute("data-copy")||o||e.textContent;if(e.closest(".markdown-code-wrapper")){var s;n=(s=e.closest(".markdown-code-wrapper").querySelector("code"))==null?void 0:s.textContent}if(n)try{navigator.clipboard.writeText(n),e.classList.add("copied"),setTimeout(()=>e.classList.remove("copied"),600)}catch(r){console.error("Failed to copy anchor link:",r)}}actionButton(t){t.stopPropagation();let o=$(t.currentTarget).closest(".content-zone, [data-item-id]").first().find(".component-button").not(".form-button").find(It);o[0]&&ke(o[0],t)}actionModal(t){let e=$(t.currentTarget),o=this.getProductInfo(e[0]),n=e.attr("data-modal-id");flexbe_cli.modal.find(n)||(n=flexbe_cli.modal.$list.find(`._anchor[name="${n}"]`).closest(".m_modal").attr("data-id")||n),/^(form|done)$/.test(n)&&!flexbe_cli.modal.find(n)&&(n=`${e.closest("[data-id]").attr("data-id").split("_")[0]}_${n}`),flexbe_cli.events.trigger("ui_mobilemenu_close"),flexbe_cli.events.trigger("ui_modal_open",{id:n,data:{items:o?[o]:[]}})}actionCart(t){let e=$(t.currentTarget),o=e.closest(".m_modal").length,n=e.closest(".disabled").length,s=this.getProductInfo(e[0]),r=!1,a=e.closest(Rt);a.length||(a=e),!(!s||n)&&(r=a.is("button"),r&&(a.append(`
                <svg class="in-cart-icon" viewBox="0 0 18 14" width="18" height="18">
                    <path d="M 2.205 5.77223L 0 7.92347L 6.3 14L 18 2.15124L 15.795 0L 6.3 9.74699L 2.205 5.77223Z"/>
                </svg>
            `),requestAnimationFrame(()=>{a.addClass("animate-add-to-cart")})),setTimeout(()=>{o&&(flexbe_cli.events.trigger("ui_modal_close"),flexbe_cli.ecommerce.cartStore.dispatch("addItem",s)),r&&requestAnimationFrame(()=>{a.removeClass("animate-add-to-cart"),a.find(".in-cart-icon").remove()})},o?450:1600),o||flexbe_cli.ecommerce.cartStore.dispatch("addItem",s))}actionQuiz(t){let e=$(t.currentTarget).closest("[data-id]").attr("data-id");flexbe_cli.events.trigger("quiz_command",{command:"start",id:e})}actionClose(t){t.preventDefault(),flexbe_cli.events.trigger("ui_modal_close")}reachGoals(t){let e=$(t.currentTarget),o=e.attr("data-action"),n=o==="modal"?e.attr("data-modal-id"):e.attr("href"),s=flexbe_cli.stat.getGoal(o,n),r=e.attr("data-goal"),a=e.attr("data-html-goal");flexbe_cli.stat.reachGoals({mainGoal:s,goal:r,htmlGoal:a})}getProductInfo(t){var e;let o=flexbe_cli.ecommerce.getProductInfo(t)||{};return(!((e=o)!=null&&e.title)||o.title==="-"||o.price==null&&!flexbe_cli.ecommerce.settings.allowPriceless)&&(o=null),o}};var Nt,Ct=class i{static create(){return Nt||(Nt=new i,Nt)}constructor(){this.bindEvents()}bindEvents(){let t=(e,o)=>{var n;let r=(n=$(e).find(".swiper")[0])==null?void 0:n.swiper;if(r){if(o==="prev")r.slidePrev();else if(o==="next")r.slideNext();else if(o.includes("slide")){let a=+o.match(/\d+$/)[0];r.slideTo(a-1)}}};$("body").on("click",'a[href^="#prev"], a[href^="#next"], a[href^="#slide"]',e=>{let o=String(e.currentTarget.href).match(".*#(.*)")[1],[n,s]=o.split(":"),r;s?r=$(`[data-id="${s}"]`)[0]:r=$(e.currentTarget).parents("[data-id]").toArray().find(l=>l.querySelector(".swiper")),r&&(flexbe_cli.scroll.toElement(r,{complete:()=>{t(r,n)}}),e.preventDefault(),e.stopPropagation())})}};var Di=new Map,dt=new Map,Ri={},Le=i=>{let t=$(i),e=t.find("[data-component]").toArray();return t.each((o,n)=>{$(n).is("[data-component]")&&e.unshift(n)}),e},zi=(i,t)=>{dt.has(i)||dt.set(i,t),i.componentInstance=t},hn=i=>{i.componentInstance=null,dt.delete(i)},mn={registerComponent(i){Di.set(i.is,i)},getComponentClass(i){return Di.get(i)},getInstances(i){return Le(i).map(t=>dt.get(t)).filter(Boolean)},getGlobalInstance(i){return Ri[i]},setGlobalInstance(i,t){Ri[i]=t},init(){this.setGlobalInstance("autoWidth",ut.create()),this.setGlobalInstance("lazyLoading",F.create()),this.setGlobalInstance("links",Tt.create()),this.setGlobalInstance("lightbox",kt.create()),this.setGlobalInstance("sliderControl",Ct.create()),this.setGlobalInstance("animation",Et.create()),flexbe_cli.events.off(".core_components").on("hideShowUI.core_components",i=>{Array.from(dt.values()).forEach(t=>t._onHideShowUI(i))}),$(window).off(".core_components").on("resized.core_components",()=>{Array.from(dt.values()).forEach(i=>i._onWindowResize())})},initInArea(i,t){_t(Le(i),10).forEach(st(o=>o.forEach(n=>this.initComponent(n,t))))},destroyInArea(i){_t(Le(i),10).forEach(st(e=>e.forEach(o=>this.destroyComponent(o))))},initComponent(i,t="init",e){if(!(i!=null&&i.isConnected))return null;let o=i.componentInstance;if(o)if(t==="update")o.destroy();else return zi(i,o),o;e=e||flexbe_cli.entity.closestEntity(i);let n=String(i.getAttribute("data-component")).trim(),s=this.getComponentClass(n);return s?(typeof s=="function"&&(o=new s({component:i,core:e||flexbe_cli.entity.closestEntity(i),reason:t}),o._onInit(),zi(i,o)),o):null},destroyComponent(i){let t=i.componentInstance;t&&t.destroy(),hn(i)}},Fe=mn;flexbe_cli.helpers=Ye;flexbe_cli.run=Y;flexbe_cli.utm=it;flexbe_cli.stat=ce;flexbe_cli.events=v;flexbe_cli.locale=M;flexbe_cli.adaptive=ue;flexbe_cli.scroll=z;flexbe_cli.resize=P;flexbe_cli.tip=ei;flexbe_cli.transitions=Ft;flexbe_cli.require=R;flexbe_cli.fixed=me;flexbe_cli.entity=nt;flexbe_cli.block=Ee;flexbe_cli.modal=L;flexbe_cli.ecommerce=q;flexbe_cli.components=Fe;ie(()=>{Y.init(),z.init(),P.init(),ue.init()},()=>{Fe.init(),k(()=>ce.init()),k(()=>q.init({enableDelivery:!0,enablePromotions:!0,enableProducts:!0})),k(()=>{nt.init(),Ee.init(),L.init()}),k(()=>oi.init()),k(()=>me.init(),200)});
